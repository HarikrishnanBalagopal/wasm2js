(()=>{"use strict";var __webpack_modules__={735:(t,e,n)=>{n.d(e,{GI:()=>p,IV:()=>s,Io:()=>_,KG:()=>r,S1:()=>i,di:()=>o,hM:()=>c,mm:()=>a});const s=65536,o="__my_wasm2js_helper_ctz",_=2n**64n,a=2n**63n-1n,r=-(2n**63n),c=2**32,i=2**31-1,p=-(2**31)},294:(t,e,n)=>{n.d(e,{$fu:()=>fe,A18:()=>ie,AI0:()=>R,ARc:()=>me,ASf:()=>et,B2e:()=>d,BF8:()=>Gt,BKh:()=>X,BLP:()=>le,BUN:()=>Ot,BWM:()=>k,BaX:()=>ae,Biz:()=>At,C0O:()=>O,Cap:()=>Ut,D2H:()=>p,DG6:()=>nt,DGE:()=>Mt,DLN:()=>V,E2D:()=>Tt,E9R:()=>y,FPU:()=>g,FUF:()=>i,FZV:()=>ue,GTH:()=>Ee,HQ9:()=>vt,Ht0:()=>dt,IC6:()=>x,INI:()=>ce,Io8:()=>j,JV_:()=>St,JWo:()=>l,LR3:()=>it,M5W:()=>z,MZn:()=>Y,MbB:()=>I,N16:()=>G,NI5:()=>Yt,N_O:()=>jt,Okp:()=>Kt,OrZ:()=>Et,OyQ:()=>_,Pet:()=>u,R$M:()=>h,Rb8:()=>m,S$1:()=>st,S1M:()=>Wt,TGZ:()=>q,U7s:()=>ft,VDo:()=>pe,VU1:()=>o,VdM:()=>de,Vs6:()=>$,WB$:()=>gt,WD6:()=>U,WHI:()=>mt,Wyh:()=>ot,XPn:()=>wt,XQI:()=>N,Xmz:()=>_t,Y1B:()=>Ht,YzW:()=>Zt,Z9l:()=>Pt,ZCU:()=>S,Zn2:()=>Lt,_oO:()=>a,aX5:()=>he,bel:()=>P,bnA:()=>Rt,c$W:()=>re,c2P:()=>at,c3i:()=>v,c4P:()=>J,c5S:()=>kt,c6J:()=>Qt,cJk:()=>xt,cYj:()=>Bt,dCg:()=>D,eSJ:()=>Dt,epn:()=>oe,fL7:()=>lt,f_T:()=>Ct,flZ:()=>Q,g$0:()=>L,gEx:()=>pt,geW:()=>K,hOc:()=>Z,j8l:()=>A,jPL:()=>ne,jZd:()=>It,kJE:()=>c,kP0:()=>bt,kXX:()=>W,kXk:()=>zt,kgi:()=>Jt,krz:()=>_e,lSp:()=>F,mJg:()=>ct,mgx:()=>Vt,pO0:()=>yt,pXG:()=>T,q1U:()=>E,qHj:()=>B,qso:()=>s,r6g:()=>H,rEk:()=>ee,rdx:()=>w,tNe:()=>r,tzH:()=>qt,uPd:()=>te,ucY:()=>se,umX:()=>Ft,vTZ:()=>Xt,vgP:()=>ht,wNn:()=>C,xJo:()=>b,ylT:()=>f,yq1:()=>Nt,z$P:()=>ut,zDl:()=>$t,zco:()=>M,zqM:()=>rt,zvM:()=>tt});const s=64,o=0,_=1,a=2,r=3,c=4,i=5,p=11,l=12,u=13,d=14,m=15,h=16,E=17,f=26,g=27,I=32,b=33,k=34,y=35,O=36,x=40,D=41,w=42,M=44,R=45,P=46,A=47,T=53,L=54,U=55,C=56,B=58,v=59,j=62,K=65,W=66,$=67,F=68,S=69,N=70,V=71,G=72,q=73,J=74,H=75,z=76,X=77,Z=78,Y=79,Q=80,tt=81,et=82,nt=92,st=93,ot=94,_t=95,at=96,rt=104,ct=106,it=107,pt=108,lt=109,ut=110,dt=111,mt=112,ht=113,Et=114,ft=115,gt=116,It=117,bt=118,kt=119,yt=122,Ot=123,xt=124,Dt=125,wt=126,Mt=131,Rt=132,Pt=133,At=134,Tt=135,Lt=136,Ut=138,Ct=139,Bt=140,vt=142,jt=143,Kt=145,Wt=146,$t=147,Ft=148,St=149,Nt=150,Vt=151,Gt=152,qt=158,Jt=162,Ht=167,zt=168,Xt=169,Zt=170,Yt=171,Qt=173,te=178,ee=179,ne=192,se=252,oe=0,_e=1,ae=2,re=3,ce=4,ie=5,pe=6,le=7,ue=8,de=9,me=10,he=11,Ee=253,fe=Object.fromEntries(Object.entries({I_UNREACHABLE:0,I_NOP:1,I_BLOCK:2,I_LOOP:3,I_IF:4,I_ELSE:5,I_END:11,I_BR:12,I_BR_IF:13,I_BR_TABLE:14,I_RETURN:15,I_CALL:16,I_CALL_INDIRECT:17,I_DROP:26,I_SELECT:27,I_SELECT_TYPED:28,I_LOCAL_GET:32,I_LOCAL_SET:33,I_LOCAL_TEE:34,I_GLOBAL_GET:35,I_GLOBAL_SET:36,I_I32_LOAD:40,I_I64_LOAD:41,I_F32_LOAD:42,I_F64_LOAD:43,I_I32_LOAD_8_S:44,I_I32_LOAD_8_U:45,I_I32_LOAD_16_S:46,I_I32_LOAD_16_U:47,I_I64_LOAD_8_S:48,I_I64_LOAD_8_U:49,I_I64_LOAD_16_S:50,I_I64_LOAD_16_U:51,I_I64_LOAD_32_S:52,I_I64_LOAD_32_U:53,I_I32_STORE:54,I_I64_STORE:55,I_F32_STORE:56,I_F64_STORE:57,I_I32_STORE_8:58,I_I32_STORE_16:59,I_I64_STORE_8:60,I_I64_STORE_16:61,I_I64_STORE_32:62,I_MEMORY_SIZE:63,I_MEMORY_GROW:64,I_I32_CONST:65,I_I64_CONST:66,I_F32_CONST:67,I_F64_CONST:68,I_I32_EQZ:69,I_I32_EQ:70,I_I32_NE:71,I_I32_LT_S:72,I_I32_LT_U:73,I_I32_GT_S:74,I_I32_GT_U:75,I_I32_LE_S:76,I_I32_LE_U:77,I_I32_GE_S:78,I_I32_GE_U:79,I_I64_EQZ:80,I_I64_EQ:81,I_I64_NE:82,I_I64_LT_S:83,I_I64_LT_U:84,I_I64_GT_S:85,I_I64_GT_U:86,I_I64_LE_S:87,I_I64_LE_U:88,I_I64_GE_S:89,I_I64_GE_U:90,I_F32_EQ:91,I_F32_NE:92,I_F32_LT:93,I_F32_GT:94,I_F32_LE:95,I_F32_GE:96,I_F64_EQ:97,I_F64_NE:98,I_F64_LT:99,I_F64_GT:100,I_F64_LE:101,I_F64_GE:102,I_I32_CLZ:103,I_I32_CTZ:104,I_I32_POPCNT:105,I_I32_ADD:106,I_I32_SUB:107,I_I32_MUL:108,I_I32_DIV_S:109,I_I32_DIV_U:110,I_I32_REM_S:111,I_I32_REM_U:112,I_I32_AND:113,I_I32_OR:114,I_I32_XOR:115,I_I32_SHL:116,I_I32_SHR_S:117,I_I32_SHR_U:118,I_I32_ROTL:119,I_I32_ROTR:120,I_I64_CLZ:121,I_I64_CTZ:122,I_I64_POPCNT:123,I_I64_ADD:124,I_I64_SUB:125,I_I64_MUL:126,I_I64_DIV_S:127,I_I64_DIV_U:128,I_I64_REM_S:129,I_I64_REM_U:130,I_I64_AND:131,I_I64_OR:132,I_I64_XOR:133,I_I64_SHL:134,I_I64_SHR_S:135,I_I64_SHR_U:136,I_I64_ROTL:137,I_I64_ROTR:138,I_F32_ABS:139,I_F32_NEG:140,I_F32_CEIL:141,I_F32_FLOOR:142,I_F32_TRUNC:143,I_F32_NEAREST:144,I_F32_SQRT:145,I_F32_ADD:146,I_F32_SUB:147,I_F32_MUL:148,I_F32_DIV:149,I_F32_MIN:150,I_F32_MAX:151,I_F32_COPYSIGN:152,I_F64_ABS:153,I_F64_NEG:154,I_F64_CEIL:155,I_F64_FLOOR:156,I_F64_TRUNC:157,I_F64_NEAREST:158,I_F64_SQRT:159,I_F64_ADD:160,I_F64_SUB:161,I_F64_MUL:162,I_F64_DIV:163,I_F64_MIN:164,I_F64_MAX:165,I_F64_COPYSIGN:166,I_I32_WRAP_I64:167,I_I32_TRUNC_F32_S:168,I_I32_TRUNC_F32_U:169,I_I32_TRUNC_F64_S:170,I_I32_TRUNC_F64_U:171,I_I64_EXTEND_I32_S:172,I_I64_EXTEND_I32_U:173,I_I64_TRUNC_F32_S:174,I_I64_TRUNC_F32_U:175,I_I64_TRUNC_F64_S:176,I_I64_TRUNC_F64_U:177,I_F32_CONVERT_I32_S:178,I_F32_CONVERT_I32_U:179,I_I32_EXTEND_8_S:192}).map((([t,e])=>[e,t])))},451:(t,e,n)=>{var s,o;n.d(e,{Ge:()=>s}),function(t){t[t.I32=127]="I32",t[t.I64=126]="I64",t[t.F32=125]="F32",t[t.F64=124]="F64",t[t.V128=123]="V128",t[t.FuncRef=112]="FuncRef",t[t.ExternRef=111]="ExternRef"}(s||(s={})),Object.fromEntries(Object.entries({I32:127,I64:126,F32:125,F64:124,V128:123,FuncRef:112,ExternRef:111}).map((([t,e])=>[e,t]))),function(t){t[t.VALUE=0]="VALUE",t[t.LABEL=1]="LABEL",t[t.FRAME=2]="FRAME"}(o||(o={}))},148:(t,e,n)=>{n.d(e,{G:()=>s});const s=t=>JSON.stringify(t,((t,e)=>"bigint"==typeof e?e.toString():e))},341:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MY:()=>compile,_K:()=>instantiate});var _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(294),_types_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(769),_common_constants_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(735),_common_utils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(148),_common_types_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(451),_parser_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(472);const newCompilationContext=()=>({newId:0,func_type_idx:-1,funcs:[],types:[],stack:[]}),range=t=>[...Array(t).keys()],my_stringify=t=>JSON.stringify(t,((t,e)=>"bigint"==typeof e?e.toString():e)),compileAotHelper=(t,e,n=!1,s=!0)=>{n&&console.log("DEBUG compileAotHelper called with ctx:",JSON.stringify(t),"and body:",e);const o=[];for(let _ of e){if(n){const t=_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.$fu[_.opCode];console.log("compiling inst:",_,t);const e="data"in _?" "+my_stringify(_.data).slice(0,64):"";o.push(`// opcode: ${_.opCode} ${t}${e}`)}switch(_.opCode){case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.VU1:o.push('throw new Error("unreachable code");');break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.OyQ:break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__._oO:{n&&console.log("DEBUG block",_.data);const e=_.data;if(e.blockType!==_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.qso){if(e.blockType===_common_types_js__WEBPACK_IMPORTED_MODULE_2__.Ge.I32){console.log("Warning: SPECIAL CASE of I32 block type");const _="block_with_result_"+t.newId++;t.stack.push({is_loop:!1,label:_});const a=compileAotHelper(t,e.body,n,s);o.push(`${_}: {`),o.push(...a.map((t=>"    "+t))),o.push("}");break}throw new Error("TODO: implement non-empty block type")}const a="block_"+t.newId++;t.stack.push({is_loop:!1,label:a});const r=compileAotHelper(t,e.body,n,s);o.push(`${a}: {`),o.push(...r.map((t=>"    "+t))),o.push("}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.tNe:{n&&console.log("DEBUG loop",_.data);const e=_.data;if(e.blockType!==_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.qso)throw new Error("TODO: implement non-empty loop type");const a="loop_"+t.newId++;t.stack.push({is_loop:!0,label:a});const r=compileAotHelper(t,e.body,n,s);o.push(`${a}: while (true) {`),o.push(...r.map((t=>"    "+t))),o.push(`    break ${a};`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.kJE:{const e=_.data,a="if_"+t.newId++;t.stack.push({is_loop:!1,label:a}),o.push(`${a}: if (stack.pop() !== 0) {`);const r=compileAotHelper(t,e.trueBody,n,s);if(o.push(...r.map((t=>"    "+t))),e.falseBody){o.push("} else {");const _=compileAotHelper(t,e.falseBody,n,s);o.push(..._.map((t=>"    "+t)))}o.push("}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.FUF:break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.D2H:if(n&&console.log("DEBUG I_END >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> stack:",JSON.stringify(t.stack)),0===t.stack.length)throw new Error("trying to I_END with an empty stack");t.stack.pop(),n&&console.log("stack:",JSON.stringify(t.stack));break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.JWo:{n&&console.log("I_BR inst",_,"stack",JSON.stringify(t.stack));const e=_.data;if(0===t.stack.length)throw n&&console.log("I_BR inst",_),new Error("trying to br with an empty stack");const s=t.stack.length-1-e,a=t.stack[s];if(0===s){console.log("I_BR break to a function instead of a block or loop, target:",a);const e=t.types[t.func_type_idx];0===e.results.length?o.push("return;"):1===e.results.length?o.push("return stack.pop();"):o.push(`return stack.slice(-${e.results.length});`);break}o.push(`${a.is_loop?"continue":"break"} ${a.label};`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Pet:{n&&console.log("I_BR_IF inst",_,"stack",JSON.stringify(t.stack));const e=_.data;if(0===t.stack.length)throw n&&console.log("I_BR_IF inst",_),new Error("trying to br_if with an empty stack");const s=t.stack.length-1-e,a=t.stack[s];if(0===s){n&&console.log("I_BR_IF break (conditional) to a function instead of a block or loop, target:",a);const e=t.types[t.func_type_idx];0===e.results.length?o.push("if (stack.pop() !== 0) { return; }"):1===e.results.length?o.push("if (stack.pop() !== 0) { return stack.pop(); }"):o.push(`if (stack.pop() !== 0) { return stack.slice(-${e.results.length}); }`);break}o.push(`if (stack.pop() !== 0) { ${a.is_loop?"continue":"break"} ${a.label}; }`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.B2e:{const e=_.data;if(n&&console.log("I_BR_TABLE instData:",e),e.def>=t.stack.length)throw new Error("not enough stack elements for def branch");if(Math.max(...e.branches)>=t.stack.length)throw new Error("not enough stack elements for the various branch");if(0===e.branches.length){n&&console.log("DEBUG: I_BR_TABLE with only a default branch");const s=t.stack[t.stack.length-1-e.def];o.push("stack.pop();",`${s.is_loop?"continue":"break"} ${s.label};`);break}n&&console.log("DEBUG: I_BR_TABLE with multiple branches and a default branch"),o.push("{","    const target_idx = stack.pop();");for(let n=0;n<e.branches.length;n++){const s=e.branches[n],_=t.stack[t.stack.length-1-s];0===n?o.push(`    if(target_idx === ${n}) { ${_.is_loop?"continue":"break"} ${_.label}; }`):o.push(`    else if(target_idx === ${n}) { ${_.is_loop?"continue":"break"} ${_.label}; }`)}const s=t.stack[t.stack.length-1-e.def];o.push(`    else { ${s.is_loop?"continue":"break"} ${s.label}; }`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Rb8:{const e=t.types[t.func_type_idx];if(0===e.results.length){o.push("return;");break}if(1===e.results.length){o.push("return stack.pop();");break}o.push(`return stack.slice(-${e.results.length});`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.R$M:{n&&console.log("I_CALL",_,"ctx:",JSON.stringify(t));const e=_.data;if(e>=t.funcs.length)throw new Error("function index is outside the range of the funcs array");const s=t.funcs[e];if(s>=t.types.length)throw new Error("function type index is outside the range of the types array");const a=t.types[s];if(n&&console.log("I_CALL calling a function of funcIdx",e," func_type_idx",s," func_type",a),0===a.params.length&&0===a.results.length){o.push(`func${e}();`);break}if(0===a.params.length){1===a.results.length?o.push(`stack.push(func${e}());`):o.push(`stack.push(...func${e}());`);break}if(0===a.results.length){1===a.params.length?o.push(`func${e}(stack.pop());`):o.push("{",`    const args = stack.slice(-${a.params.length});`,...range(a.params.length).map((()=>"    stack.pop();")),`    func${e}(...args);`,"}");break}1===a.results.length?1===a.params.length?o.push(`stack.push(func${e}(stack.pop()));`):o.push("{",`    const args = stack.slice(-${a.params.length});`,...range(a.params.length).map((()=>"    stack.pop();")),`    const result = func${e}(...args);`,"    stack.push(result);","}"):1===a.params.length?o.push(`stack.push(...func${e}(stack.pop()));`):o.push("{",`    const args = stack.slice(-${a.params.length});`,...range(a.params.length).map((()=>"    stack.pop();")),`    stack.push(...func${e}(...args));`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.q1U:{n&&console.log("DEBUG I_CALL_INDIRECT inst",_);const e=_.data,s=t.types[e.typeIdx];n&&console.log("DEBUG I_CALL_INDIRECT func_type",s);const a=[];if(0===s.params.length)0===s.results.length?a.push("    f();"):1===s.results.length?a.push("    const result = f();","    stack.push(result);"):a.push("    const result = f();","    stack.push(...result);");else{const t=s.params.length;a.push(`    const args = stack.slice(${t});`),0===s.results.length?a.push("    f(...args);"):1===s.results.length?a.push("    const result = f(...args);","    stack.push(result);"):a.push("    const result = f(...args);","    stack.push(...result);")}o.push("{","    const i = stack.pop();",`    const f = table${e.tableIdx}[i];`,...a,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.ylT:o.push("stack.pop();");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.FPU:o.push("{","    const condition = stack.pop();","    const x2 = stack.pop();","    const x1 = stack.pop();","    stack.push(condition !== 0 ? x1 : x2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.MbB:o.push(`stack.push(local${_.data});`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.xJo:n?(o.push("{"),o.push(`    local${_.data} = stack.pop();`),o.push(`    if(local${_.data} < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_LOCAL_SET local${_.data} less than most negative');`),o.push("}")):o.push(`local${_.data} = stack.pop();`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.BWM:o.push(`local${_.data} = stack[stack.length - 1];`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.E9R:n?(o.push("{"),o.push(`    const g = global${_.data};`),o.push("    stack.push(g);"),o.push(`    if(g < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_GLOBAL_GET g less than most negative');`),o.push("}")):o.push(`stack.push(global${_.data});`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.C0O:o.push(`global${_.data} = stack.pop();`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.IC6:{const t=_.data;o.push(`stack.push(new DataView(memory0.buffer, ${t.offset} + stack.pop(), 4).getInt32(0, true));`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.dCg:{const t=_.data;o.push(`stack.push(new DataView(memory0.buffer, ${t.offset} + stack.pop(), 8).getBigInt64(0, true));`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.rdx:{const t=_.data;o.push("{"),o.push("    const x = stack.pop();"),o.push(`    const o = ${t.offset};`),n&&o.push("    try {"),o.push("        stack.push(new DataView(memory0.buffer, o + x, 4).getFloat32(0, true));"),n&&o.push("    } catch(e) {",'        console.log("DEBUG I_F32_LOAD x", x, "o", o, "memory0", memory0);',"        debugger;",'        throw new Error("DEBUG I_F32_LOAD getFloat32");',"    }"),o.push("}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.zco:{const t=_.data;o.push(`stack.push(new DataView(memory0.buffer, ${t.offset} + stack.pop(), 1).getInt8(0));`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.AI0:{const t=_.data;o.push(`stack.push(new DataView(memory0.buffer, ${t.offset} + stack.pop(), 1).getUint8(0));`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.bel:{const t=_.data;o.push(`stack.push(new DataView(memory0.buffer, ${t.offset} + stack.pop(), 2).getInt16(0, true));`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.j8l:{const t=_.data;o.push(`stack.push(new DataView(memory0.buffer, ${t.offset} + stack.pop(), 2).getUint16(0, true));`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.pXG:{const t=_.data;o.push(`stack.push(BigInt(new DataView(memory0.buffer, ${t.offset} + stack.pop(), 4).getUint32(0, true)));`);break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.g$0:{const t=_.data;o.push("{","    const x = stack.pop();","    const a = stack.pop();",`    const offset = ${t.offset};`,"    const address = offset + a;"),n&&o.push("    if (address < 0) {",'        console.error("I_I32_STORE DEBUG a", a, "offset", offset, "address", address);',"        debugger;",'        throw new Error("I_I32_STORE the address is negative");',"    }"),o.push("    new DataView(memory0.buffer, address, 4).setInt32(0, x, true);","}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.WD6:{const t=_.data;o.push("{","    const x = stack.pop();",`    new DataView(memory0.buffer, ${t.offset} + stack.pop(), 8).setBigUint64(0, BigInt(x), true);`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.wNn:{const t=_.data;o.push("{","    const x = stack.pop();",`    new DataView(memory0.buffer, ${t.offset} + stack.pop(), 4).setFloat32(0, x, true);`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.qHj:{const t=_.data;o.push("{","    const x = stack.pop();",`    memory0[${t.offset} + stack.pop()] = x;`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.c3i:{const t=_.data;o.push("{","    const x = stack.pop();",`    new DataView(memory0.buffer, ${t.offset} + stack.pop(), 2).setInt16(0, x, true);`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Io8:{const t=_.data;o.push("{","    const x = Number(stack.pop() & 0xFFFFFFFFn);",`    new DataView(memory0.buffer, ${t.offset} + stack.pop(), 4).setInt32(0, x, true);`,"}");break}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.geW:o.push(`stack.push(${_.data});`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.kXX:o.push(`stack.push(${_.data}n);`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Vs6:case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.lSp:o.push(`stack.push(${_.data});`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.ZCU:o.push("stack.push(stack.pop() === 0 ? 1 : 0);");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.XQI:o.push("stack.push(stack.pop() === stack.pop() ? 1 : 0);");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.DLN:o.push("stack.push(stack.pop() !== stack.pop() ? 1 : 0);");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.N16:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() < x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.TGZ:s?o.push("{","    const y = BigInt.asUintN(32, BigInt(stack.pop()));","    const x = BigInt.asUintN(32, BigInt(stack.pop()));","    stack.push(x < y ? 1 : 0);","}"):o.push("{","    const x = stack.pop();","    stack.push(stack.pop() < x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.c4P:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() > x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.r6g:s?o.push("{","    const y = BigInt.asUintN(32, BigInt(stack.pop()));","    const x = BigInt.asUintN(32, BigInt(stack.pop()));","    stack.push(x > y ? 1 : 0);","}"):o.push("{","    const x = stack.pop();","    stack.push(stack.pop() > x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.M5W:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() <= x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.BKh:s?o.push("{","    const y = BigInt.asUintN(32, BigInt(stack.pop()));","    const x = BigInt.asUintN(32, BigInt(stack.pop()));","    stack.push(x <= y ? 1 : 0);","}"):o.push("{","    const x = stack.pop();","    stack.push(stack.pop() <= x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.hOc:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() >= x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.MZn:s?o.push("{","    const y = BigInt.asUintN(32, BigInt(stack.pop()));","    const x = BigInt.asUintN(32, BigInt(stack.pop()));","    stack.push(x >= y ? 1 : 0);","}"):o.push("{","    const x = stack.pop();","    stack.push(stack.pop() >= x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.flZ:o.push("stack.push(stack.pop() === 0n ? 1 : 0);");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.zvM:o.push("stack.push(stack.pop() === stack.pop() ? 1 : 0);");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.ASf:case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.DG6:o.push("stack.push(stack.pop() !== stack.pop() ? 1 : 0);");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.S$1:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() < x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Wyh:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() > x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Xmz:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() <= x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.c2P:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() >= x ? 1 : 0);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.zqM:o.push(`stack.push(${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.di}(stack.pop(), false));`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.mJg:o.push("{","    const y = stack.pop();","    const x = stack.pop();","    const sp_x = x + y;",`    const sp_x_1 = (sp_x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.GI}) ? (sp_x + ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) : sp_x;`,`    const sp_x_2 = (sp_x_1 > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.S1}) ? (sp_x_1 - ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) : sp_x_1;`,"    stack.push(sp_x_2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.LR3:o.push("{","    const x = stack.pop();","    const sp_x = stack.pop() - x;",`    const sp_x_1 = (sp_x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.GI}) ? (sp_x + ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) : sp_x;`,`    const sp_x_2 = (sp_x_1 > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.S1}) ? (sp_x_1 - ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) : sp_x_1;`,"    stack.push(sp_x_2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.gEx:o.push("{","    const sp_x = Number(BigInt.asIntN(32, BigInt(stack.pop() * stack.pop())));",`    const sp_x_1 = (sp_x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.GI}) ? (sp_x + ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) : sp_x;`,`    const sp_x_2 = (sp_x_1 > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.S1}) ? (sp_x_1 - ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) : sp_x_1;`,"    stack.push(sp_x_2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.fL7:s?o.push("{","    const y = BigInt.asIntN(32, BigInt(stack.pop()));","    const x = BigInt.asIntN(32, BigInt(stack.pop()));","    stack.push(Number(x / y));","}"):o.push("{","    const x = stack.pop();","    stack.push(Math.trunc(stack.pop() / x));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.z$P:s?o.push("{","    const y = BigInt.asUintN(32, BigInt(stack.pop()));","    const x = BigInt.asUintN(32, BigInt(stack.pop()));","    stack.push(Number(x / y));","}"):o.push("{","    const x = stack.pop();","    stack.push(Math.trunc(stack.pop() / x));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Ht0:case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.WHI:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() % x);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.vgP:o.push("stack.push(stack.pop() & stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.OrZ:o.push("stack.push(stack.pop() | stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.U7s:s?o.push("{","    const x2 = Number(BigInt.asUintN(32, BigInt(stack.pop())));","    const x1 = Number(BigInt.asUintN(32, BigInt(stack.pop())));","    stack.push(x1 ^ x2);","}"):o.push("stack.push(stack.pop() ^ stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.WB$:o.push("{","    const x = stack.pop();","    stack.push((stack.pop() << x) & 0xFFFFFFFF);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.jZd:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() >> x);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.kP0:o.push("{","    const by = stack.pop();","    const value = stack.pop();","    const shifted = value >>> by;","    stack.push(shifted);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.c5S:o.push("{","    const x = stack.pop();","    const v = stack.pop();","    stack.push(((v << x) & 0xFFFFFFFF) | (v >>> (32-x)));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.pO0:o.push(`stack.push(BigInt(${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.di}(stack.pop(), true)));`);break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.BUN:o.push('stack.push(BigInt(BigInt.asUintN(64, stack.pop()).toString(2).split("").filter(x => x==="1").length));');break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.cJk:o.push("{","    const sp_x = stack.pop() + stack.pop();",`    const sp_x_1 = (sp_x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) ? (sp_x + ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.Io}n) : sp_x;`,`    const sp_x_2 = (sp_x_1 > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.mm}n) ? (sp_x_1 - ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.Io}n) : sp_x_1;`,"    stack.push(sp_x_2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.eSJ:o.push("{","    const x = stack.pop();","    const sp = stack.pop();","    const sp_x = sp - x;",`    const sp_x_1 = (sp_x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) ? (sp_x + ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.Io}n) : sp_x;`,`    const sp_x_2 = (sp_x_1 > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.mm}n) ? (sp_x_1 - ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.Io}n) : sp_x_1;`,"    stack.push(sp_x_2);"),n&&o.push(`    if(x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_SUB x less than most negative');`,`    if(sp < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_SUB sp less than most negative');`,`    if(sp_x_2 < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_SUB sp_x_2 less than most negative');`),o.push("}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.XPn:o.push("{","    const sp_x = BigInt.asIntN(64, stack.pop() * stack.pop());",`    const sp_x_1 = (sp_x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) ? (sp_x + ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.Io}n) : sp_x;`,`    const sp_x_2 = (sp_x_1 > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.mm}n) ? (sp_x_1 - ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.Io}n) : sp_x_1;`,"    stack.push(sp_x_2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.DGE:o.push("{"),o.push("    const y = stack.pop();"),o.push("    const x = stack.pop();"),o.push("    const z = x & y;"),o.push("    stack.push(z);"),n&&(o.push(`    if(x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_AND x less than most negative');`),o.push(`    if(y < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_AND y less than most negative');`),o.push(`    if(z < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_AND z less than most negative');`)),o.push("}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.bnA:o.push("stack.push(stack.pop() | stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Z9l:o.push("{","    const x2 = BigInt.asUintN(64, stack.pop());","    const x1 = BigInt.asUintN(64, stack.pop());","    const x3 = x1 ^ x2;"),n&&o.push(`    if(x1 < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_XOR x1 less than most negative');`,`    if(x2 < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) throw new Error('I_I64_XOR x2 less than most negative');`,`    if(x3 < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.KG}n) { console.log("I_I64_XOR x1", x1, "x2", x2, "x3", x3); throw new Error('I_I64_XOR x3 less than most negative'); }`,`    if(x3 > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.Io}) throw new Error("I_I64_XOR x3 is greated than most positive unsigned i64");`),o.push("    stack.push(x3);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Biz:o.push("{","    const by = stack.pop();","    const value = stack.pop();","    const shifted = (value << by) & 0xFFFFFFFFFFFFFFFFn;","    stack.push(shifted);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.E2D:case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Zn2:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() >> x);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Cap:o.push("{","    const x = stack.pop();","    const v = BigInt.asUintN(64, stack.pop());","    stack.push((v >> x) | ((v << (64n - x) & 0xFFFFFFFFFFFFFFFFn)));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.f_T:o.push("stack.push(Math.abs(stack.pop()));");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.cYj:o.push("stack.push(-stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.HQ9:o.push("stack.push(Math.floor(stack.pop()));");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.N_O:o.push("stack.push(Math.trunc(stack.pop()));");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Okp:o.push("stack.push(Math.sqrt(stack.pop()));");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.S1M:o.push("stack.push(stack.pop() + stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.zDl:o.push("{","    const x = stack.pop();","    stack.push(stack.pop() - x);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.umX:o.push("stack.push(stack.pop() * stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.JV_:o.push("{","    const y = stack.pop();","    const x = stack.pop();","    const z = x / y;","    stack.push(z);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.yq1:o.push("{","    const x2 = stack.pop();","    const x1 = stack.pop();","    stack.push(x1 < x2 ? x1 : x2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.mgx:o.push("{","    const x2 = stack.pop();","    const x1 = stack.pop();","    stack.push(x1 > x2 ? x1 : x2);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.BF8:o.push("{","    const x2 = stack.pop();","    const x1 = stack.pop();","    stack.push(((x1 >= 0 && x2 >= 0) || (x1 < 0 && x2 < 0)) ? x1 : -x1);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.tzH:o.push("stack.push(Math.round(stack.pop()));");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.kgi:o.push("stack.push(stack.pop() * stack.pop());");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Y1B:o.push("{","    const x = stack.pop();","    const y = BigInt.asIntN(32, x);","    const z = Number(y);","    stack.push(z);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.kXk:o.push("{","    const x = stack.pop();",'    if(!Number.isFinite(x)) throw new Error("I_I32_TRUNC_F32_S not finite");',`    if(x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.GI} || x > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.S1}) throw new Error("RuntimeError: float unrepresentable in integer range");`,"    stack.push(Math.trunc(x));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.vTZ:o.push("{","    const x = stack.pop();",'    if(!Number.isFinite(x)) throw new Error("I_I32_TRUNC_F32_U not finite");',`    if(x < 0 || x > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) throw new Error("RuntimeError: float unrepresentable in integer range");`,"    stack.push(Math.trunc(x));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.YzW:o.push("{","    const x = stack.pop();",'    if(!Number.isFinite(x)) throw new Error("I_I32_TRUNC_F64_S not finite");',`    if(x < ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.GI} || x > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.S1}) throw new Error("RuntimeError: float unrepresentable in integer range");`,"    stack.push(Math.trunc(x));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.NI5:o.push("{","    const x = stack.pop();",'    if(!Number.isFinite(x)) throw new Error("I_I32_TRUNC_F64_U not finite");',`    if(x < 0 || x > ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.hM}) throw new Error("RuntimeError: float unrepresentable in integer range");`,"    stack.push(Math.trunc(x));","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.c6J:o.push("{","    const x = stack.pop();","    const y = BigInt(x);","    const z = BigInt.asUintN(32, y);","    stack.push(z);","}");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.uPd:case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.rEk:break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.jPL:o.push("stack.push(Number(BigInt.asIntN(8, BigInt(stack.pop()))));");break;case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.ucY:{const t=_.data;if(console.log("TODO: I_VARIABLE_0XFC instData:",t),!Array.isArray(t)||0===t.length)throw new Error("invalid I_VARIABLE_0XFC");const e=t[0];if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.epn)throw new Error("TODO: implement I_I32_TRUNC_SAT_F32_S");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.krz)throw new Error("TODO: implement I_I32_TRUNC_SAT_F32_U");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.BaX)throw new Error("TODO: implement I_I32_TRUNC_SAT_F64_S");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.c$W)throw new Error("TODO: implement I_I32_TRUNC_SAT_F64_U");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.INI)throw new Error("TODO: implement I_I64_TRUNC_SAT_F32_S");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.A18)throw new Error("TODO: implement I_I64_TRUNC_SAT_F32_U");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.VDo)throw new Error("TODO: implement I_I64_TRUNC_SAT_F64_S");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.BLP)throw new Error("TODO: implement I_I64_TRUNC_SAT_F64_U");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.FZV)throw new Error("TODO: implement I_MEMORY_INIT");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.VdM)throw new Error("TODO: implement I_DATA_DROP");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.ARc)throw new Error("TODO: implement I_MEMORY_COPY");if(e===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.aX5){o.push("{","    const n = stack.pop();","    const value = stack.pop();","    const dest = stack.pop();","    memory0.fill(value, dest, dest + n);","}");break}throw new Error("TODO: implement I_VARIABLE_0XFC")}case _common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.GTH:throw new Error("TODO: implement I_VARIABLE_0XFD");default:throw o.push(`// TODO: unknown op code, cannot compile, inst: ${(0,_common_utils_js__WEBPACK_IMPORTED_MODULE_5__.G)(_)}`),new Error(`unknown op code, cannot compile, inst: ${(0,_common_utils_js__WEBPACK_IMPORTED_MODULE_5__.G)(_)}`)}}return o},compile=(t,e=!1,n=!0)=>{e&&console.log("DEBUG compileAot called with wasmBytes:",t);const s=(0,_parser_js__WEBPACK_IMPORTED_MODULE_3__.l)(t);if(s.type!==_types_js__WEBPACK_IMPORTED_MODULE_1__.V8.RESULT)throw new Error(`parsing failed. ${(0,_common_utils_js__WEBPACK_IMPORTED_MODULE_5__.G)(s)}`);const o=s.result;e&&console.log("DEBUG ast:",o);const _=[],a=[`function ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.di}(x, is_64) {`,"    const bwidth = is_64 ? 64 : 32;",'    const s = BigInt.asUintN(bwidth, BigInt(x)).toString(2).padStart(bwidth, "0");',"    let count = 0;","    for (let i = s.length-1; i >= 0; i--, count++) {",'        if (s[i] !== "0") {',"            break;","        }","    }","    if(count < 0 || count > bwidth) {",'        console.error("x", x, "s", s, "count", count);','        throw new Error("DEBUG: CTZ count is incorrect");',"    }","    return count;","}"],r=o.imports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.TABLE)),c=r.length;r.forEach(((t,e)=>{a.push(`if (!('${t.module}' in import_object) || !('${t.name}' in import_object['${t.module}'])) {`,`    throw new Error('failed to find the table import in the import object: ${t.module} ${t.name}');`,"}",`const table${e} = import_object['${t.module}']['${t.name}'];`)}));const i=o.imports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.GLOBAL)),p=i.length;i.forEach(((t,e)=>{a.push(`if (!('${t.module}' in import_object) || !('${t.name}' in import_object['${t.module}'])) {`,`    throw new Error('failed to find the global import in the import object: ${t.module} ${t.name}');`,"}",`let global${e} = import_object['${t.module}']['${t.name}'];`)}));const l=o.imports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.MEM));if(l.length>0){if(l.length>1)throw new Error("maximum one memory import is supported currently");const t=l[0];e&&console.log("DEBUG importedMemory",t),a.push(`if (!import_object['${t.module}'] || !import_object['${t.module}']['${t.name}']) {`,`    throw new Error('failed to find the memory import in the import object: ${t.module} ${t.name}');`,"}",`const memory0 = import_object['${t.module}']['${t.name}'];`)}const u=o.imports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.FUNC)),d=u.map((t=>t.typeIdx)),m=u.length;e&&console.log("DEBUG importedFuncsTypeIdxs",d,"importedFuncsLength",m),u.forEach(((t,e)=>{a.push(`if (!import_object['${t.module}'] || !import_object['${t.module}']['${t.name}']) {`,`    throw new Error('failed to find the function import in the import object: ${t.module} ${t.name}');`,"}",`const func${e} = import_object['${t.module}']['${t.name}'];`)})),e&&console.log("DEBUG importJsCode",a),_.push(...a);const h=o.globals.map(((t,e)=>`${t.mut?"let":"const"} global${p+e} = ${(t=>{if(0===t.expr.length)return 0;if(2!==t.expr.length)throw new Error("bad expression");const e=t.expr[0];if(e.opCode===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.geW||e.opCode===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.kXX||e.opCode===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.Vs6||e.opCode===_common_instructions_js__WEBPACK_IMPORTED_MODULE_0__.lSp)return e.data;throw new Error("bad expression, invalid opCode")})(t)}${t.type===_common_types_js__WEBPACK_IMPORTED_MODULE_2__.Ge.I64?"n":""};`));_.push(...h);const E=o.mems.map(((t,e)=>`const memory${e} = new Uint8Array(${t.min} * ${_common_constants_js__WEBPACK_IMPORTED_MODULE_4__.IV});`));_.push(...E);const f=o.datas.map((t=>{if(e&&console.log("ast.datas.map(x",t),"active"!==t.type)throw new Error("TODO: support passive data sections");const n=t.offsetExpr[0].data;return`memory0.set([${t.data}], ${n});`}));e&&console.log("DEBUG dataJsCode",f),_.push(...f);const g=o.tables.map(((t,e)=>`const table${c+e} = ${(t=>{let e="[ ";for(let n=0;n<t;n++)e+=n===t-1?"null":"null, ";return e+=" ]",e})(t.limits.min)};`));_.push(...g);for(let t=0;t<o.funcs.length;t++){const s=o.funcs[t],a=o.types[s],r=o.codes[t],c=r.locals.map(((t,e)=>`    let local${a.params.length+e} = ${t===_common_types_js__WEBPACK_IMPORTED_MODULE_2__.Ge.I64?"0n":"0"};`));e&&(console.log("----------------------------------------------"),console.log("DEBUG compiling function, i:",t,"func_type:",a,"code:",r));const i=[`function func${m+t}(${0===a.params.length?"":range(a.params.length).map((t=>`local${t}`)).join(", ")}) {`,"    const stack = [];",...c],p=newCompilationContext();p.func_type_idx=s,p.funcs=[...d,...o.funcs],p.types=o.types,p.stack.push({is_loop:!1,label:`top_level_func_${t}`});const l=compileAotHelper(p,r.body,e,n);i.push(...l.map((t=>"    "+t))),a.results.length>0&&(1===a.results.length?i.push("    return stack.pop();"):i.push(`    return stack.slice(-${a.results.length});`)),i.push("}"),_.push(...i)}const I=o.exports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.TABLE));e&&console.log("DEBUG EXPORTED TABLES",I);const b=["const wasmExports = {",...o.exports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.FUNC)).map((t=>`    "${t.name}": func${t.idx},`)),...o.exports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.TABLE)).map((t=>`    "${t.name}": table${t.idx},`)),...o.exports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.MEM)).map((t=>`    "${t.name}": memory${t.idx},`)),...o.exports.filter((t=>t.type===_types_js__WEBPACK_IMPORTED_MODULE_1__.VF.GLOBAL)).map((t=>`    "${t.name}": global${t.idx},`)),"};"];return _.push(...b),o.start>=0&&_.push(`func${o.start}();`),"(function (import_object) {\n    "+_.join("\n    ")+"\n    return { exports: wasmExports };\n})"},instantiate=(compiledJSCode,importObject)=>{const createInstance=eval(compiledJSCode);return createInstance(importObject)}},472:(t,e,n)=>{n.d(e,{l:()=>pt});const s=(t,e=!1)=>{if(0===t.length)throw new Error("the provided bytes is empty");const n=Array.from(t).map((t=>BigInt(127&t))).reverse();let s=0n;for(let t of n)s=128n*s+t;if(e&&0n!==n[0]){let t=s.toString(2);if(t.length%7!=0){const e=t.length+7-t.length%7;t=t.padStart(e,"0")}if("1"===t[0]){let t=1n;for(;t<s;)t*=128n;s=t-s,s=-s}}return s},o=(new TextEncoder,new TextDecoder);var _=n(294),a=n(451),r=n(769);const c=t=>e=>n=>{const s=e(n);return s.type===r.V8.ERROR?s:{type:r.V8.RESULT,rest:s.rest,result:t(s.result)}},i=(t,e)=>e=>e.length<1||e[0]!==t?{type:r.V8.ERROR,rest:e,error:[`${t}`,e]}:{type:r.V8.RESULT,rest:new Uint8Array(e.buffer,e.byteOffset+1),result:t},p=t=>e=>{if(e.length<t.length)return{type:r.V8.ERROR,rest:e,error:[JSON.stringify(t),e]};for(let n=0;n<t.length;n++)if(e[n]!==t[n])return{type:r.V8.ERROR,rest:e,error:[JSON.stringify(t),e]};return{type:r.V8.RESULT,rest:new Uint8Array(e.buffer,e.byteOffset+t.length),result:t}},l=t=>e=>n=>{for(let t of e){const e=t(n);if(e.type!==r.V8.ERROR)return e}return{type:r.V8.ERROR,rest:n,error:[t,n]}},u=t=>e=>{const n=[];let s=e;for(let e of t){const t=e(s);if(t.type===r.V8.ERROR)return t;n.push(t.result),s=t.rest}return{type:r.V8.RESULT,rest:s,result:n}},d=t=>e=>{const n=[];let s=e;for(;;){const e=t(s);if(e.type===r.V8.ERROR)return{type:r.V8.RESULT,rest:s,result:n};n.push(e.result),s=e.rest}},m=t=>e=>{const n=t(e);return n.type===r.V8.RESULT?n:{type:r.V8.RESULT,rest:e,result:null}},h=i(a.Ge.I32),E=i(a.Ge.I64),f=i(a.Ge.F32),g=i(a.Ge.F64),I=l("numtype")([h,E,f,g]),b=i(a.Ge.V128),k=l("vectype")([b]),y=i(a.Ge.FuncRef),O=i(a.Ge.ExternRef),x=l("reftype")([y,O]),D=l("valtype")([I,k,x]),w=t=>{if(0===t.length)return{type:r.V8.ERROR,rest:t,error:["u32",t]};const e=[];let n=0;for(;n<t.length&&n<5;n++)if(e.push(t[n]),0==(128&t[n])){n++;break}if(0!=(128&e[e.length-1]))return{type:r.V8.ERROR,rest:t,error:["u32",t]};const o=s(new Uint8Array(e),!1);return{type:r.V8.RESULT,rest:new Uint8Array(t.buffer,t.byteOffset+n),result:{type:"u32",value:o}}},M=t=>{if(0===t.length)return{type:r.V8.ERROR,rest:t,error:["i32",t]};const e=[];let n=0;for(;n<t.length&&n<5;n++)if(e.push(t[n]),0==(128&t[n])){n++;break}if(0!=(128&e[e.length-1]))return{type:r.V8.ERROR,rest:t,error:["i32",t]};const o=Number(s(new Uint8Array(e),!0));return{type:r.V8.RESULT,rest:new Uint8Array(t.buffer,t.byteOffset+n),result:{type:"i32",value:o}}},R=t=>e=>{const n=w(e);return n.type===r.V8.ERROR?n:Number(n.result.value)!==t?{type:r.V8.ERROR,rest:e,error:[`num u32 - ${t}`,e]}:{type:r.V8.RESULT,rest:n.rest,result:t}},P=t=>e=>{const n=w(e);return n.type===r.V8.ERROR?n:(s=Number(n.result.value),t=>e=>{const n=[];let o=e;for(let e=0;e<s;e++){const e=t(o);if(e.type===r.V8.ERROR)return e;n.push(e.result),o=e.rest}return{type:r.V8.RESULT,rest:o,result:n}})(t)(n.rest);var s},A=t=>{const e=w(t);if(e.type===r.V8.ERROR)return e;const n=Number(e.result.value);if(e.rest.length<n)return{type:r.V8.ERROR,rest:e.rest,error:["vec-bytes",e.rest]};const s=new Uint8Array(e.rest.buffer,e.rest.byteOffset,n),o=new Uint8Array(e.rest.buffer,e.rest.byteOffset+n);return{type:r.V8.RESULT,rest:o,result:s}},T=c((t=>o.decode(t)))(A),L=P(D),U=c((t=>({type:"functype",value:{params:t[1],results:t[2]}})))(u([i(96,"functype"),L,L])),C=c((t=>({type:"limits",value:{min:Number(t[1].value),max:Number(t[2]?.value)}})))(l("limits")([u([i(0,"limits"),w]),u([i(1,"limits-with-max"),w,w])])),B=C,v=c((t=>({type:t[0],limits:t[1].value})))(u([x,C])),j=u([D,l("mut")([i(0,"const"),i(1,"var")])]),K=c((t=>Number(t.value)))(w),W=c((t=>({align:Number(t[0].value),offset:Number(t[1].value)})))(u([w,w])),$=c((t=>{if(Array.isArray(t)){if(2===t.length){const e=t[1];return"u32"===e.type||"i32"===e.type||"i64"===e.type||"f32"===e.type||"f64"===e.type?{opCode:t[0],data:e.value}:{opCode:t[0],data:t[1]}}return{opCode:t[0],data:t.slice(1)}}return{opCode:t}}))(l("plaininst")([i(_.VU1,"unreachable"),i(_.OyQ,"nop"),u([i(_.JWo,"br"),K]),u([i(_.Pet,"br_if"),K]),c((t=>[t[0],{branches:t[1],def:t[2]}]))(u([i(_.B2e,"br_table"),P(K),K])),i(15,"return"),u([i(_.R$M,"call"),K]),c((t=>[t[0],{typeIdx:t[1],tableIdx:t[2]}]))(u([i(_.q1U,"call_indirect"),K,K])),u([i(208,"ref.null"),x]),i(209,"ref.is_null"),u([i(210,"ref.func"),K]),i(26,"drop"),i(27,"select"),u([i(28,"select"),P(D)]),u([i(_.MbB,"local.get"),K]),u([i(_.xJo,"local.set"),K]),u([i(_.BWM,"local.tee"),K]),u([i(35,"global.get"),K]),u([i(36,"global.set"),K]),u([i(37,"table.get"),K]),u([i(38,"table.set"),K]),u([i(252,"table.init"),R(12),K,K]),u([i(252,"elem.drop"),R(13),K]),u([i(252,"table.copy"),R(14),K,K]),u([i(252,"table.grow"),R(15),K]),u([i(252,"table.size"),R(16),K]),u([i(252,"table.fill"),R(17),K]),u([i(_.IC6,"i32.load"),W]),u([i(41,"i64.load"),W]),u([i(42,"f32.load"),W]),u([i(43,"f64.load"),W]),u([i(44,"i32.load8_s"),W]),u([i(_.AI0,"i32.load8_u"),W]),u([i(46,"i32.load16_s"),W]),u([i(_.j8l,"i32.load16_u"),W]),u([i(48,"i64.load8_s"),W]),u([i(49,"i64.load8_u"),W]),u([i(50,"i64.load16_s"),W]),u([i(51,"i64.load16_u"),W]),u([i(52,"i64.load32_s"),W]),u([i(53,"i64.load32_u"),W]),u([i(_.g$0,"i32.store"),W]),u([i(55,"i64.store"),W]),u([i(56,"f32.store"),W]),u([i(57,"f64.store"),W]),u([i(_.qHj,"i32.store8"),W]),u([i(59,"i32.store16"),W]),u([i(60,"i64.store8"),W]),u([i(61,"i64.store16"),W]),u([i(62,"i64.store32"),W]),u([i(63,"memory.size"),i(0,"memory.size")]),u([i(64,"memory.grow"),i(0,"memory.grow")]),u([i(252,"memory.init"),R(_.FZV),K,i(0,"memory.init")]),u([i(252,"data.drop"),R(_.VdM),K]),u([i(252,"memory.copy"),R(_.ARc),i(0,"memory.copy"),i(0,"memory.copy")]),u([i(252,"memory.fill"),R(_.aX5),i(0,"memory.fill")]),u([i(_.geW,"i32.const"),M]),u([i(66,"i64.const"),t=>{if(0===t.length)return{type:r.V8.ERROR,rest:t,error:["i64",t]};const e=[];let n=0;for(;n<t.length&&n<10;n++)if(e.push(t[n]),0==(128&t[n])){n++;break}if(0!=(128&e[e.length-1]))return{type:r.V8.ERROR,rest:t,error:["i64",t]};const o=s(new Uint8Array(e),!0);return{type:r.V8.RESULT,rest:new Uint8Array(t.buffer,t.byteOffset+n),result:{type:"i64",value:o}}}]),u([i(67,"f32.const"),t=>{if(t.length<4)return{type:r.V8.ERROR,rest:t,error:["f32",t]};const e=new DataView(t.buffer,t.byteOffset,4).getFloat32(0,!0);return{type:r.V8.RESULT,rest:new Uint8Array(t.buffer,t.byteOffset+4),result:{type:"f32",value:e}}}]),u([i(68,"f64.const"),t=>{if(t.length<8)return{type:r.V8.ERROR,rest:t,error:["f64",t]};const e=new DataView(t.buffer,t.byteOffset,8).getFloat64(0,!0);return{type:r.V8.RESULT,rest:new Uint8Array(t.buffer,t.byteOffset+8),result:{type:"f64",value:e}}}]),i(69,"i32.eqz"),i(70,"i32.eq"),i(71,"i32.ne"),i(72,"i32.lt_s"),i(73,"i32.lt_u"),i(74,"i32.gt_s"),i(75,"i32.gt_u"),i(76,"i32.le_s"),i(77,"i32.le_u"),i(78,"i32.ge_s"),i(79,"i32.ge_u"),i(80,"i64.eqz"),i(81,"i64.eq"),i(82,"i64.ne"),i(83,"i64.lt_s"),i(84,"i64.lt_u"),i(85,"i64.gt_s"),i(86,"i64.gt_u"),i(87,"i64.le_s"),i(88,"i64.le_u"),i(89,"i64.ge_s"),i(90,"i64.ge_u"),i(91,"f32.eq"),i(92,"f32.ne"),i(93,"f32.lt"),i(94,"f32.gt"),i(95,"f32.le"),i(96,"f32.ge"),i(97,"f64.eq"),i(98,"f64.ne"),i(99,"f64.lt"),i(100,"f64.gt"),i(101,"f64.le"),i(102,"f64.ge"),i(103,"i32.clz"),i(104,"i32.ctz"),i(105,"i32.popcnt"),i(_.mJg,"i32.add"),i(107,"i32.sub"),i(108,"i32.mul"),i(109,"i32.div_s"),i(110,"i32.div_u"),i(111,"i32.rem_s"),i(112,"i32.rem_u"),i(113,"i32.and"),i(114,"i32.or"),i(115,"i32.xor"),i(116,"i32.shl"),i(117,"i32.shr_s"),i(118,"i32.shr_u"),i(119,"i32.rotl"),i(120,"i32.rotr"),i(121,"i64.clz"),i(122,"i64.ctz"),i(123,"i64.popcnt"),i(124,"i64.add"),i(125,"i64.sub"),i(126,"i64.mul"),i(127,"i64.div_s"),i(128,"i64.div_u"),i(129,"i64.rem_s"),i(130,"i64.rem_u"),i(131,"i64.and"),i(132,"i64.or"),i(133,"i64.xor"),i(134,"i64.shl"),i(135,"i64.shr_s"),i(136,"i64.shr_u"),i(137,"i64.rotl"),i(138,"i64.rotr"),i(139,"f32.abs"),i(140,"f32.neg"),i(141,"f32.ceil"),i(142,"f32.floor"),i(143,"f32.trunc"),i(144,"f32.nearest"),i(145,"f32.sqrt"),i(146,"f32.add"),i(147,"f32.sub"),i(148,"f32.mul"),i(149,"f32.div"),i(150,"f32.min"),i(151,"f32.max"),i(152,"f32.copysign"),i(153,"f64.abs"),i(154,"f64.neg"),i(155,"f64.ceil"),i(156,"f64.floor"),i(157,"f64.trunc"),i(158,"f64.nearest"),i(159,"f64.sqrt"),i(160,"f64.add"),i(161,"f64.sub"),i(162,"f64.mul"),i(163,"f64.div"),i(164,"f64.min"),i(165,"f64.max"),i(166,"f64.copysign"),i(167,"i32.wrap_i64"),i(168,"i32.trunc_f32_s"),i(169,"i32.trunc_f32_u"),i(170,"i32.trunc_f64_s"),i(171,"i32.trunc_f64_u"),i(172,"i64.extend_i32_s"),i(173,"i64.extend_i32_u"),i(174,"i64.trunc_f32_s"),i(175,"i64.trunc_f32_u"),i(176,"i64.trunc_f64_s"),i(177,"i64.trunc_f64_u"),i(178,"f32.convert_i32_s"),i(179,"f32.convert_i32_u"),i(180,"f32.convert_i64_s"),i(181,"f32.convert_i64_u"),i(182,"f32.demote_f64"),i(183,"f64.convert_i32_s"),i(184,"f64.convert_i32_u"),i(185,"f64.convert_i64_s"),i(186,"f64.convert_i64_u"),i(187,"f64.promote_f32"),i(188,"i32.reinterpret_f32"),i(189,"i64.reinterpret_f64"),i(190,"f32.reinterpret_i32"),i(191,"f64.reinterpret_i64"),i(192,"i32.extend8_s"),i(193,"i32.extend16_s"),i(194,"i64.extend8_s"),i(195,"i64.extend16_s"),i(196,"i64.extend32_s"),u([i(252,"ixx.trunc_sat_fxx_su"),w]),u([i(253,"vector_instruction"),w,W])])),F=l("blocktype")([i(64,"empty-block-type"),D,M]);function S(t){return l("blockinst")([c((t=>{const e=t;return{opCode:e[0],data:{blockType:e[1],body:[...e[2],{opCode:_.D2H}]}}}))(u([i(_._oO,"block"),F,d(N),i(_.D2H,"end")])),c((t=>{const e=t;return{opCode:e[0],data:{blockType:e[1],body:[...e[2],{opCode:_.D2H}]}}}))(u([i(_.tNe,"loop"),F,d(N),i(_.D2H,"end")])),c((t=>{const e=t;return{opCode:e[0],data:{blockType:e[1],trueBody:[...e[2],{opCode:_.D2H}]}}}))(u([i(_.kJE,"if"),F,d(N),i(_.D2H,"end")])),c((t=>{const e=t;return{opCode:e[0],data:{blockType:e[1],trueBody:[...e[2],{opCode:5}],falseBody:[...e[4],{opCode:_.D2H}]}}}))(u([i(_.kJE,"if"),F,d(N),i(_.FUF,"else"),d(N),i(_.D2H,"end")]))])(t)}function N(t){return l("inst")([$,S])(t)}const V=c((t=>[...t[0],{opCode:_.D2H}]))(u([d(N),i(_.D2H,"end")])),G=(t,e,n)=>s=>{const o=u([i(t,"section-type"),A])(s);if(o.type===r.V8.ERROR)return o;const _=n(o.result[1]);return _.type===r.V8.ERROR?_:{type:r.V8.RESULT,rest:_.rest,result:{type:e,value:_.result}}},q=(G(0,"section-custom",u([T,A])),G(1,"section-type",P(U))),J=c((t=>({type:t[0],typeIdx:t[1]})))(l("importdesc")([u([i(r.VF.FUNC,"func"),K]),u([i(r.VF.GLOBAL,"table"),v]),u([i(r.VF.MEM,"mem"),B]),u([i(r.VF.GLOBAL,"global"),j])])),H=G(2,"section-import",P(c((t=>({type:"import",value:{module:t[0],name:t[1],type:t[2].type,typeIdx:t[2].typeIdx}})))(u([T,T,J])))),z=G(3,"section-func",P(K)),X=G(4,"section-table",P(v)),Z=G(5,"section-mem",P(B)),Y=G(6,"section-global",P(c((t=>({type:t[0][0],mut:1===t[0][1],expr:t[1]})))(u([j,V])))),Q=l("exportdesc")([u([i(0,"func"),K]),u([i(1,"table"),K]),u([i(2,"mem"),K]),u([i(3,"global"),K])]),tt=G(7,"section-export",P(c((t=>({name:t[0],type:t[1][0],idx:t[1][1]})))(u([T,Q])))),et=G(8,"section-start",K),nt=c((t=>{const e=[],n=t[0].value,s=t[1];for(let t=0;t<n;t++)e.push(s);return e}))(u([w,D])),st=c((t=>({locals:t[0],body:t[1]})))(u([c((t=>t.flat()))(P(nt)),V]));var ot;const _t=G(10,"section-code",P((ot=st,t=>e=>{const n=t(e);if(n.type===r.V8.ERROR)return n;const s=ot(n.result);return s.type===r.V8.ERROR?{type:r.V8.ERROR,rest:n.rest,error:s.error}:{type:r.V8.RESULT,rest:n.rest,result:s.result}})(A))),at=G(11,"section-data",P(l("data-segment")([c((t=>{const e=t;return{type:"active",offsetExpr:e[1],data:e[2]}}))(u([R(0),V,A])),c((t=>({type:"passive",data:t[1]})))(u([R(1),A]))]))),rt=G(12,"section-data-count",w),ct=p([0,97,115,109]),it=p([1,0,0,0]),pt=c((t=>{const e=t.slice(2).filter((t=>null!==t)),n={type:"module",types:[],imports:[],funcs:[],tables:[],mems:[],globals:[],exports:[],start:-1,codes:[],datas:[]};return["section-type","section-import","section-func","section-table","section-mem","section-global","section-export","section-start","section-code","section-data"].forEach((t=>{const s=e.filter((e=>e.type===t));if(s.length>1)throw new Error(`expected exactly one section of type ${t}`);if(0===s.length)return;const o=s[0];if("section-start"===t)return void(n.start=o.value);if("section-type"===t)return void(n.types=o.value.map((t=>t.value)));if("section-import"===t)return void(n.imports=o.value.map((t=>t.value)));if("section-mem"===t)return void(n.mems=o.value.map((t=>t.value)));if("section-data"===t)return void(n.datas=o.value);const _=t.replace(/^section-/,"")+"s";n[_]=o.value})),n}))(u([ct,it,m(q),m(H),m(z),m(X),m(Z),m(Y),m(tt),m(et),m(rt),m(_t),m(at),t=>0===t.length?{type:r.V8.RESULT,rest:t,result:null}:{type:r.V8.ERROR,rest:t,error:[r.sd,t]}]))},769:(t,e,n)=>{var s;n.d(e,{V8:()=>s,VF:()=>_,sd:()=>o}),function(t){t.RESULT="result",t.ERROR="error"}(s||(s={}));const o="EOF";var _;!function(t){t[t.FUNC=0]="FUNC",t[t.TABLE=1]="TABLE",t[t.MEM=2]="MEM",t[t.GLOBAL=3]="GLOBAL"}(_||(_={}))}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{var t=__webpack_require__(341);const e="root",n=async n=>{console.log("setting up the AOT compiled BadGB demo");const s=document.querySelector("#"+e);s.innerHTML="",s.innerHTML='<div id="game">\n  <canvas width="160" height="144"></canvas>\n</div>\n<button id="load" class="capsuleBtn">Load</button>\n<div id="gp">\n  <div id="gp_dpad">\n    <div id="gp_left"></div>\n    <div id="gp_right"></div>\n    <div id="gp_up"></div>\n    <div id="gp_down"></div>\n  </div>\n  <div id="gp_select" class="capsuleBtn">Select</div>\n  <div id="gp_start" class="capsuleBtn">Start</div>\n  <div id="gp_b" class="roundBtn">B</div>\n  <div id="gp_a" class="roundBtn">A</div>\n</div>\n<input type="file" id="openfile" hidden>';{const t=document.createElement("style");t.innerHTML='/* mobile gamepad CSS and JS copied from\n    https://github.com/chrismaltby/gb-studio/blob/v2beta/appData/js-emulator/index.html\n    (see LICENSE.gbstudio)\n    */\n    body {\n      position: absolute;\n      display: flex;\n      flex-direction: column;\n      background-color: #eee;\n      margin: 0;\n      width: 100%;\n      height: 100%;\n      user-select: none;\n      -webkit-user-select: none;\n    }\n    \n    #game {\n      display: flex;\n      flex-direction: column;\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      touch-action: none;\n      text-align: center;\n    }\n    \n    #load {\n      position: absolute;\n      top: 0;\n      right: 0;\n      color: white;\n      opacity: 0.5;\n    }\n    \n    canvas {\n      object-fit: contain;\n      image-rendering: pixelated;\n      image-rendering: crisp-edges;\n      height: 100%;\n    }\n    \n    #gp {\n      display: none;\n      position: fixed;\n      bottom: 0px;\n      height: 210px;\n      width: 100%;\n      touch-action: none;\n      opacity: 0.8;\n    }\n    \n    #gp_dpad {\n      position: absolute;\n      bottom: 20px;\n      left: 0px;\n      width: 184px;\n      height: 184px;\n    }\n    \n    #gp_dpad:before {\n      content: "";\n      display: block;\n      width: 48px;\n      height: 48px;\n      background: #5c5c5c;\n      background: radial-gradient(\n        ellipse at center,\n        #5c5c5c 0%,\n        #555 59%,\n        #5c5c5c 60%\n      );\n      position: absolute;\n      left: 68px;\n      top: 68px;\n    }\n    \n    #gp_left {\n      position: absolute;\n      left: 20px;\n      top: 68px;\n      width: 48px;\n      height: 48px;\n      background: #666;\n      background: radial-gradient(ellipse at center, #666 0%, #5c5c5c 80%);\n      border-top-left-radius: 4px;\n      border-bottom-left-radius: 4px;\n    }\n    \n    #gp_right {\n      position: absolute;\n      left: 116px;\n      top: 68px;\n      width: 48px;\n      height: 48px;\n      background: #666;\n      background: radial-gradient(ellipse at center, #666 0%, #5c5c5c 80%);\n      border-top-right-radius: 4px;\n      border-bottom-right-radius: 4px;\n    }\n    \n    #gp_up {\n      position: absolute;\n      left: 68px;\n      top: 20px;\n      width: 48px;\n      height: 48px;\n      background: #666;\n      background: radial-gradient(ellipse at center, #666 0%, #5c5c5c 80%);\n      border-top-left-radius: 4px;\n      border-top-right-radius: 4px;\n    }\n    \n    #gp_down {\n      position: absolute;\n      left: 68px;\n      top: 116px;\n      width: 48px;\n      height: 48px;\n      background: #666;\n      background: radial-gradient(ellipse at center, #666 0%, #5c5c5c 80%);\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n    }\n    \n    #gp_a {\n      position: absolute;\n      bottom: 110px;\n      right: 20px;\n    }\n    \n    #gp_b {\n      position: absolute;\n      bottom: 80px;\n      right: 100px;\n    }\n    \n    .roundBtn {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-weight: bold;\n      font-size: 32px;\n      color: #440f1f;\n      line-height: 64px;\n      width: 64px;\n      height: 64px;\n      border-radius: 64px;\n      background: #870a4c;\n      background: radial-gradient(ellipse at center, #ab1465 0%, #8b1e57 100%);\n      box-shadow: 0px 4px 5px rgba(0, 0, 0, 0.2);\n    }\n    \n    .capsuleBtn {\n      font-weight: bold;\n      font-size: 10px;\n      color: #111;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      line-height: 40px;\n      text-transform: uppercase;\n      width: 64px;\n      height: 32px;\n      border-radius: 40px;\n      background: #222;\n      background: radial-gradient(ellipse at center, #666 0%, #555 100%);\n      box-shadow: 0px 4px 5px rgba(0, 0, 0, 0.2);\n    }\n    \n    #gp_start {\n      position: absolute;\n      bottom: 20px;\n      right: 15px;\n    }\n    \n    #gp_select {\n      position: absolute;\n      bottom: 20px;\n      right: 100px;\n    }\n    \n    .btnPressed {\n      opacity: 0.5;\n    }\n    \n    @media only screen and (max-width: 640px) {\n      #game canvas {\n        margin-top: 0px;\n        width: 100%;\n        max-width: 480px;\n        border: 0px;\n        border-radius: 0px;\n      }\n    }\n    \n    @media only screen and (max-device-width: 812px) and (orientation: portrait) {\n      body {\n        margin: 0;\n      }\n    \n      #game {\n        width: 100%;\n        position: fixed;\n        touch-action: none;\n      }\n    \n      #game canvas {\n        margin: 0;\n        display: block;\n        width: 100% !important;\n        height: auto !important;\n      }\n    }\n    \n    @media only screen and (max-device-width: 320px) and (orientation: portrait) {\n      #gp_dpad {\n        left: -5px;\n        bottom: -5px;\n      }\n    \n      #gp_a {\n        right: 5px;\n        bottom: 95px;\n      }\n    \n      #gp_b {\n        right: 80px;\n      }\n    \n      #gp_start {\n        right: 5px;\n      }\n    \n      #gp_select {\n        right: 80px;\n      }\n    }\n    \n    @media only screen and (max-width: 500px) and (max-height: 400px) {\n      #gp {\n        display: none;\n      }\n    }\n    \n    /* Small devices in landscape */\n    @media only screen and (max-device-width: 300px) and (orientation: landscape) {\n      html,\n      body {\n        height: 100%;\n      }\n      body {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n    \n      #game:after {\n        content: "PLEASE ROTATE ";\n        font-size: 24px;\n        font-weight: bold;\n        color: #fff;\n      }\n    \n      #game canvas {\n        display: none;\n        max-width: 480px;\n      }\n    \n      #gp {\n        display: none;\n      }\n    }\n    \n    /* Devices large enough for landscape */\n    @media only screen and (min-width: 300px) and (orientation: landscape) {\n      #gp {\n        bottom: 50%;\n        transform: translateY(50%);\n        opacity: 0.5;\n      }\n    }',s.appendChild(t)}const o=document.querySelector.bind(document),_=document.querySelector("canvas").getContext("2d"),a=_.createImageData(160,144);let r;o("#load").addEventListener("click",(()=>{o("#openfile").click()})),async function(){let e=await fetch(`${window.location.pathname}assets/demo/badgb/porklike.gb`),s=await e.arrayBuffer(),o=(0,t._K)(n,{});r=new i(o,s)}(),o("#openfile").addEventListener("change",(async e=>{let s=e.target.files[0];if(!s)return;r&&r.destroy();let o=await function(t){return new Promise(((e,n)=>{const s=new FileReader;s.onerror=t=>n(t.error),s.onloadend=t=>e(t.target.result),s.readAsArrayBuffer(t)}))}(s),_=(0,t._K)(n,{});r=new i(_,o)}));let c=null;class i{constructor(t,e){this.exports=t.exports;const n=this.exports.mem.buffer;this.canvasData=new Uint8Array(n,1146880,92160);const s=new Uint8Array(n,65536,1<<20);this.extram=new Uint8Array(n,1114112,32768),s.set(new Uint8Array(e)),this.keys=new Uint8Array(n,12,4),this.bindings=[{sel:"",type:"keydown",fn:this.onKey.bind(this,!0)},{sel:"",type:"keyup",fn:this.onKey.bind(this,!1)},{sel:"#gp_select",type:"touchstart",fn:this.btnTouch.bind(this,2,1,!0)},{sel:"#gp_select",type:"touchend",fn:this.btnTouch.bind(this,2,1,!1)},{sel:"#gp_start",type:"touchstart",fn:this.btnTouch.bind(this,3,1,!0)},{sel:"#gp_start",type:"touchend",fn:this.btnTouch.bind(this,3,1,!1)},{sel:"#gp_b",type:"touchstart",fn:this.btnTouch.bind(this,1,1,!0)},{sel:"#gp_b",type:"touchend",fn:this.btnTouch.bind(this,1,1,!1)},{sel:"#gp_a",type:"touchstart",fn:this.btnTouch.bind(this,0,1,!0)},{sel:"#gp_a",type:"touchend",fn:this.btnTouch.bind(this,0,1,!1)},{sel:"#gp_dpad",type:"touchstart",fn:this.dpadTouchStartMove.bind(this)},{sel:"#gp_dpad",type:"touchmove",fn:this.dpadTouchStartMove.bind(this)},{sel:"#gp_dpad",type:"touchend",fn:this.dpadTouchEnd.bind(this)},{sel:"",type:"touchstart",fn:this.touchRestore.bind(this)}],this.updateBinding(!0),this.touchEnabled="ontouchstart"in document.documentElement,this.updateOnscreenGamepad(),this.extramIntervalId=-1,crypto.subtle.digest("sha-1",e).then((t=>{this.sha1=Array.from(new Uint8Array(t)).map((t=>t.toString(16).padStart(2,"0"))).join("");const e=localStorage.getItem(this.sha1);e&&this.extram.set(JSON.parse(e)),this.extramIntervalId=setInterval((()=>{localStorage.setItem(this.sha1,JSON.stringify(Array.from(this.extram)))}),1e3)})).finally((()=>{this.running=!0,this.update()}))}destroy(){clearInterval(this.extramIntervalId),this.running=!1,this.updateBinding(!1)}updateBinding(t){for(let e of this.bindings){const n=e.sel?o(e.sel):window;t?n.addEventListener(e.type,e.fn):n.removeEventListener(e.type,e.fn)}}setKey(t,e,n){const s=1<<t,o=~(n?s:0),_=t=>this.keys[t]=(this.keys[t]|s)&o;_(e?2:1),_(3)}setJoypRight(t){this.setKey(0,0,t)}setJoypLeft(t){this.setKey(1,0,t)}setJoypUp(t){this.setKey(2,0,t)}setJoypDown(t){this.setKey(3,0,t)}setJoypA(t){this.setKey(0,1,t)}setJoypB(t){this.setKey(1,1,t)}setJoypSelect(t){this.setKey(2,1,t)}setJoypStart(t){this.setKey(3,1,t)}onKey(t,e){switch(e.code){case"ArrowDown":this.setJoypDown(t);break;case"ArrowUp":this.setJoypUp(t);break;case"ArrowLeft":this.setJoypLeft(t);break;case"ArrowRight":this.setJoypRight(t);break;case"Enter":this.setJoypStart(t);break;case"Tab":this.setJoypSelect(t);break;case"KeyZ":this.setJoypB(t);break;case"KeyX":this.setJoypA(t)}t&&this.touchEnabled&&(this.touchEnabled=!1,this.updateOnscreenGamepad()),e.preventDefault()}update(){if(!c){this.running&&requestAnimationFrame(this.update.bind(this));try{this.exports.run()}catch(t){console.error("failed to error:",t),c=t}a.data.set(this.canvasData),_.putImageData(a,0,0)}}updateOnscreenGamepad(){o("#gp").style.display=this.touchEnabled?"block":"none"}btnTouch(t,e,n){this.setKey(t,e,n),event.currentTarget.classList.toggle("btnPressed",n),event.preventDefault()}dpadTouchStartMove(t){const e=t.currentTarget.getBoundingClientRect(),n=2*(t.targetTouches[0].clientX-e.left)/e.width-1,s=2*(t.targetTouches[0].clientY-e.top)/e.height-1;Math.abs(n)>.1?s>n&&s<-n?(this.setJoypLeft(!0),this.setJoypRight(!1)):s<n&&s>-n&&(this.setJoypLeft(!1),this.setJoypRight(!0)):(this.setJoypLeft(!1),this.setJoypRight(!1)),Math.abs(s)>.1?n>s&&n<-s?(this.setJoypUp(!0),this.setJoypDown(!1)):n<s&&n>-s&&(this.setJoypUp(!1),this.setJoypDown(!0)):(this.setJoypUp(!1),this.setJoypDown(!1)),t.preventDefault()}dpadTouchEnd(t){this.setJoypLeft(!1),this.setJoypRight(!1),this.setJoypUp(!1),this.setJoypDown(!1),t.preventDefault()}touchRestore(){this.touchEnabled=!0,this.updateOnscreenGamepad()}}},s=async s=>{const o=`${window.location.pathname}assets/wasm/${s}.wasm`;console.log("fetching wasm module",o);const _=await fetch(o);if(!_.ok)throw new Error("failed to fetch");const a=new Uint8Array(await _.arrayBuffer());console.log("wasm module bytes:",a);const r=(0,t.MY)(a,!1);if(console.log("myAotCompiledJSCode:"),console.log(r),"quine"===s)return await(async n=>{console.log("setting up the AOT compiled quine demo"),document.querySelector("#"+e).innerHTML='\n<p>\n  Click this button to compile, run, and extract the quine!\n</p>\n<button id="button-quine">Click me</button>\n<p>\n  Compiled <span id="span-count">0 times</span>.<br>\n  Here\'s the data:<br>\n  <pre id="pre-quine"></pre>\n</p>\n';const s=t=>document.querySelector(t);let o=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,7,4,1,0,2,0,8,1,0,10,32,1,30,1,1,127,3,64,32,0,32,0,40,2,0,54,2,74,32,0,65,4,106,34,0,65,202,0,73,13,0,11,11,11,80,1,0,65,0,11,74,0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,7,4,1,0,2,0,8,1,0,10,32,1,30,1,1,127,3,64,32,0,32,0,40,2,0,54,2,74,32,0,65,4,106,34,0,65,202,0,73,13,0,11,11,11,80,1,0,65,0,11,74]);const _=o.length;console.log("length",_);const a=o.slice(),r=(t,e)=>{if(console.log("compare_arrays xs",t,"ys",e),t.length!==_)throw new Error("unequal lengths 1");if(t.length!==e.length)throw new Error("unequal lengths 2");if(t.byteLength!==e.byteLength)throw new Error("unequal byteLengths");for(let n=0;n<_;n++)if(t[n]!==e[n])throw new Error(`failed on index ${n} ${t[n]} ${e[n]}`);console.log("the 2 arrays are exactly equal")};let c=0;function i(){let t="",e=o;do{for(let n of e.slice(0,16))t+=`${n.toString(16).padStart(2,"0")} `;t+="\n",e=e.slice(16)}while(e.length);s("#pre-quine").textContent=t,s("#span-count").textContent=`${c} time${1==c?"":"s"}`}i(),s("#button-quine").addEventListener("click",(async()=>{console.log("clicked"),r(a,o);const e=(0,t.MY)(o,!1),n=(0,t._K)(e,{});console.log("quine instance",n);const s=n.exports[""],p=new Uint8Array(s.buffer,0,_);o=p.slice(),console.log("data",o.byteLength,o.length,o),c++,i(),r(a,o)}))})();if("fire"===s)return await(async n=>{console.log("setting up the AOT compiled fire demo");const s=document.querySelector("#"+e);s.innerHTML="";const o=document.createElement("canvas");o.width=320,o.height=168,s.appendChild(o);{const t=document.createElement("style");t.innerHTML="body {\n            position: absolute;\n            display: flex;\n            flex-direction: column;\n            justify-content: flex-end;\n            background-color: #070707;\n            margin: 0;\n            width: 100%;\n            height: 100%;\n          }\n          canvas {\n            width: 100vw;\n            height: 52.5vw;\n          }",s.appendChild(t)}const _={"":{rand:Math.random}},a=(0,t._K)(n,_);if(console.log("fire instance",a),!(a.exports.mem instanceof Uint8Array))throw new Error('expected an export called "mem" of type Uint8Array');const r=new Uint8Array(a.exports.mem.buffer,53760,215040),c=o.getContext("2d");c.fillStyle="black",c.fillRect(0,0,320,168);const i=c.createImageData(320,168);let p=!1;const l=()=>{requestAnimationFrame(l),p||(p=!0,a.exports.run(),i.data.set(r),c.putImageData(i,0,0),p=!1)};l()})(r);if("jit"===s)return await(async n=>{console.log("setting up the AOT compiled JIT demo"),document.querySelector("#"+e).innerHTML='\n  This is a very simple expression compiler.<br>\n  You can type in an expression with the following characters (no space!).<br>\n  Then click the \'compile\' button and it will generate a new WebAssembly module,<br>\n  link it into the original wasm module, and run it.\n  </p>\n  <pre>( ) + - * / 0 1 2 3 4 5 6 7 8 9</pre>\n  <button>compile</button>\n  <input value="(3+4)*(5+1)"></input>\n  <p id="result"></p>\n  <p>\n  Here\'s the wasm module:\n  </p>\n  <pre id="wasm"></pre>\n';const s=t=>document.querySelector(t);let o,_,a,r;function c(t,e,n){let o="";for(let n of t.slice(0,e))o+=`${n.toString(16).padStart(2,"0")} `;return o=o.padEnd(30," "),o+=n,o+="\n",s("#wasm").textContent+=o,t.slice(e)}const i={"":{compile:e=>{const n=new Uint8Array(_.buffer,16,e).slice();!function(t){for(t=c(t,4,"wasm magic"),t=c(t,4,"wasm version"),t=c(t,2,"type section, length=5 bytes"),t=c(t,2,"1 function type"),t=c(t,3,"0 params, 1 i32 result"),t=c(t,2,"function section, length=2 bytes"),t=c(t,2,"1 function, type 0"),t=c(t,2,"export section, length=5 bytes"),t=c(t,1,"1 export"),t=c(t,2,'name "0"'),t=c(t,2,"function 0"),t=c(t,2,`code section, length=${t[1]} bytes`),t=c(t,2,`1 function, length=${t[1]} bytes`),t=c(t,1,"0 locals");t.length;)switch(t[0]){case 11:t=c(t,1,"end");break;case 65:t=c(t,2,`i32.const ${t[1]}`);break;case 106:t=c(t,1,"i32.add");break;case 107:t=c(t,1,"i32.sub");break;case 108:t=c(t,1,"i32.mul");break;case 109:t=c(t,1,"i32.div")}}(n);const s=(0,t.MY)(n,!1),a=(0,t._K)(s,{}).exports[0];o[0]=a}}},p=(0,t._K)(n,i);console.log("jit instance",p),_=new Uint8Array(p.exports.mem.buffer),a=p.exports.gen,r=p.exports.call,o=p.exports.table,s("button").addEventListener("click",(()=>{let t=s("input").value;for(let e=0;e<t.length;++e)_[256+e]=t.charCodeAt(e);_[256+t.length]=0,s("#wasm").textContent="",s("#result").textContent=a()?`result = ${r()}`:"error"}))})(r);if("metaball"===s)return await(async n=>{console.log("setting up the AOT compiled snake demo");const s=document.querySelector("#"+e);s.innerHTML="";const o=document.createElement("canvas");o.width=320,o.height=200,s.appendChild(o);{const t=document.createElement("style");t.innerHTML="body {\n        position: absolute;\n        display: flex;\n        flex-direction: column;\n        background-color: #d4195d;\n        margin: 0;\n        width: 100%;\n        height: 100%;\n      }\n      canvas {\n        object-fit: cover;\n        width: 100%;\n        height: 100%;\n      }",s.appendChild(t)}let _=0|Math.min(Math.max(window.outerWidth/80,4),10),a=null;document.body.addEventListener("click",(()=>a&&a(_)),!0);const r={"":{rand:Math.random}},c=(0,t._K)(n,r);console.log("AOT metaball instance",c),a=c.exports.blobs,a(_);const i=new Uint8Array(c.exports.mem.buffer,1024,256e3),p=o.getContext("2d"),l=p.createImageData(320,200);!function t(){requestAnimationFrame(t),c.exports.run(),l.data.set(i),p.putImageData(l,0,0)}()})(r);if("chip8"===s)return await(async n=>{console.log("setting up the AOT compiled chip8 demo");const s=document.querySelector("#"+e);s.innerHTML="";const o=document.createElement("canvas");o.width=64,o.height=32,s.appendChild(o);{const t=document.createElement("style");t.innerHTML="\nbody {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    background-color: #555;\n    margin: 0;\n    width: 100%;\n    height: 100%;\n}\ncanvas {\n    object-fit: contain;\n    width: 100%;\n    height: 100%;\n    image-rendering: pixelated;\n    image-rendering: -moz-crisp-edges;\n}\n",s.appendChild(t);const e=document.createElement("button");e.setAttribute("id","load"),e.textContent="load",s.appendChild(e);const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("id","openfile"),n.setAttribute("hidden","true"),s.appendChild(n)}let _,a,r=t=>document.querySelector(t);const c=new Uint8Array([99,7,193,255,162,108,241,30,240,101,64,0,18,2,132,0,197,31,162,76,245,30,240,101,200,3,72,0,18,38,134,64,134,2,70,0,18,2,163,108,128,96,240,85,132,99,162,108,241,30,128,64,240,85,163,108,130,16,129,50,129,30,129,30,129,30,130,38,130,38,130,38,209,33,18,2,3,6,12,24,48,96,192,129,7,14,28,56,112,224,193,131,15,30,60,120,240,225,195,135,31,62,124,248,241,227,199,143,255,255,255,255,255,255,255,255,255,199,255,255,255,255,255,255,255,131,255,255,255,255,255,255,255,2,63,255,255,255,255,255,255,4,31,248,103,207,19,63,252,132,15,249,167,142,115,127,248,104,15,249,167,150,112,255,248,24,19,248,103,54,112,255,240,4,33,249,167,2,115,127,224,2,64,248,33,58,115,63,192,2,129,248,97,59,19,63,192,67,2,127,255,255,255,255,128,254,4,63,255,255,255,255,128,255,8,57,201,208,195,255,192,63,144,121,201,211,159,255,192,15,224,249,201,211,159,255,224,7,225,121,204,176,199,255,240,3,18,121,204,179,227,255,248,3,12,248,78,112,135,255,252,3,0,248,78,112,135,255,252,1,0,255,255,255,255,255,254,1,0,255,255,255,255,255,255,1,1,249,206,97,8,71,255,0,3,249,204,97,9,195,255,128,3,248,76,179,153,203,255,128,7,248,9,179,152,67,255,7,135,249,40,19,153,199,255,3,135,249,41,211,152,67,255,1,7,249,233,211,152,73,255,1,7,255,255,255,255,255,255,1,7,255,255,255,255,255,255,1,7,255,255,255,255,255,0]).buffer,i=r("#openfile");async function p(e){const s={Math},r=(0,t._K)(n,s);let c=r.exports.mem,i=new Uint16Array(c.buffer,16,1),p=(t,e)=>{e?i[0]|=1<<t:i[0]&=~(1<<t)},l=(t,e)=>{switch(e.code){case"Digit1":p(1,t);break;case"Digit2":p(2,t);break;case"Digit3":p(3,t);break;case"Digit4":p(12,t);break;case"KeyQ":p(4,t);break;case"KeyW":case"ArrowUp":p(5,t);break;case"KeyE":p(6,t);break;case"KeyR":p(13,t);break;case"KeyA":case"ArrowLeft":p(7,t);break;case"KeyS":case"ArrowDown":p(8,t);break;case"KeyD":case"ArrowRight":p(9,t);break;case"KeyF":p(14,t);break;case"KeyZ":p(10,t);break;case"KeyX":p(0,t);break;case"KeyC":p(11,t);break;case"KeyV":p(15,t)}};_&&window.removeEventListener("keydown",_),a&&window.removeEventListener("keyup",a),_=l.bind(null,1),a=l.bind(null,0),window.addEventListener("keydown",_,!1),window.addEventListener("keyup",a,!1),new Uint8Array(c.buffer,512,3584).set(new Uint8Array(e));let u=new Uint8Array(c.buffer,4096,8192),d=o.getContext("2d"),m=d.createImageData(64,32);!function t(){requestAnimationFrame(t),r.exports.run(20),m.data.set(u),d.putImageData(m,0,0)}()}r("#load").addEventListener("click",(()=>{i.click()})),async function(){p(c)}(),i.addEventListener("change",(async t=>{let e=t.target.files[0];if(!e)return;let n=await function(t){return new Promise(((e,n)=>{const s=new FileReader;s.onerror=t=>n(t.error),s.onloadend=t=>e(t.target.result),s.readAsArrayBuffer(t)}))}(e);p(n)}))})(r);if("ray"===s)return await(async n=>{console.log("setting up the AOT compiled ray demo");const s=document.querySelector("#"+e);s.innerHTML="",s.innerHTML='<canvas width="320" height="200"></canvas>';{const t=document.createElement("style");t.innerHTML="body {\n      position: absolute;\n      display: flex;\n      flex-direction: column;\n      background-color: #ccc;\n      margin: 0;\n      width: 100%;\n      height: 100%;\n    }\n    canvas {\n      object-fit: cover;\n      width: 100%;\n      height: 100%;\n    }\n    .ui-wrap {\n      position: absolute;\n      display: flex;\n      flex-direction: column;\n      background-color: rgba(255, 255, 255, 0.25);\n      width: 30%;\n      height: 100%;\n      overflow-x: hidden;\n      overflow-y: scroll;\n\n      display: none;\n    }\n    .ui {\n      padding: 1em;\n      margin: auto;\n    }\n    .value {\n      min-width: 4em;\n    }",s.appendChild(t)}let o;const _={Math},a=(0,t._K)(n,_);let r=new Uint8Array(a.exports.mem.buffer,1024,256e3),c=document.querySelector("canvas").getContext("2d"),i=c.createImageData(320,200);o=a.exports.mem,setTimeout((()=>{let t=[["x.a",-10,10,.1],["x.b",-3,3,.01],["x.c",0,2*Math.PI,.1],["x.d",-10,10,.1],["y.a",-10,10,.1],["y.b",-3,3,.01],["y.c",0,2*Math.PI,.1],["y.d",-20,10,.1],["z.a",-10,10,.1],["z.b",-3,3,.01],["z.c",0,2*Math.PI,.1],["z.d",-30,-5,.1],["r.a",-3,3,.1],["r.b",-3,3,.01],["r.c",0,2*Math.PI,.1],["r.d",0,5,.1],["R.a",0,1,.01],["R.b",-3,3,.01],["R.c",0,2*Math.PI,.1],["R.d",0,1,.01],["G.a",0,1,.01],["G.b",-3,3,.01],["G.c",0,2*Math.PI,.1],["G.d",0,1,.01],["B.a",0,1,.01],["B.b",-3,3,.01],["B.c",0,2*Math.PI,.1],["B.d",0,1,.01]],e=[{},{},{}],n=new window.dat.GUI;!function t(e){requestAnimationFrame(t),a.exports.run(e),i.data.set(r),c.putImageData(i,0,0)}(0),function(){for(let s=0;s<3;++s){let _=n.addFolder(`sphere ${s}`),a=new Float32Array(o.buffer,124+16*s*7,112);for(let n=0;n<t.length;++n){let[o,r,c,i]=t[n];e[s][o]=a[n],_.add(e[s],o,r,c,i).onChange((t=>{a[n]=t}))}}}()}),10)})(r);if("snake"===s)return await(async n=>{console.log("setting up the AOT compiled snake demo");const s=document.querySelector("#"+e);s.innerHTML="";const o=document.createElement("canvas");o.width=240,o.height=320,s.appendChild(o);{const t=document.createElement("style");t.innerHTML="body {\n      position: absolute;\n      display: flex;\n      flex-direction: column;\n      background-color: #555;\n      margin: 0;\n      width: 100%;\n      height: 100%;\n    }\n    canvas {\n      object-fit: contain;\n      width: 100%;\n      height: 100%;\n    }",s.appendChild(t)}const _={Math},a=(0,t._K)(n,_);console.log("AOT snake instance",a);const r=new Uint8Array(a.exports.mem.buffer,86016,307200),c=o.getContext("2d"),i=c.createImageData(240,320),p=new Uint8Array(a.exports.mem.buffer,704,2);let l=(t,e)=>{switch(e.code){default:case"ArrowLeft":p[0]=t;break;case"ArrowRight":p[1]=t}};document.addEventListener("keydown",l.bind(null,1),!1),document.addEventListener("keyup",l.bind(null,0),!1),function t(){requestAnimationFrame(t),a.exports.run(),i.data.set(r),c.putImageData(i,0,0)}()})(r);if("dino"===s)return await(async n=>{console.log("setting up the AOT compiled dino demo");const s=document.querySelector("#"+e);s.innerHTML="";const o=document.createElement("canvas");o.width=300,o.height=75,s.appendChild(o);{const t=document.createElement("style");t.innerHTML="body {\n            position: absolute;\n            display: flex;\n            flex-direction: column;\n            background-color: #fff;\n            margin: 0;\n            width: 100%;\n            height: 100%;\n          }\n          canvas {\n            object-fit: contain;\n            width: 100%;\n            height: 100%;\n            image-rendering: pixelated;\n            image-rendering: crisp-edges;\n          }",s.appendChild(t)}const _={Math},a=(0,t._K)(n,_);console.log("AOT dino instance",a);const r=new Uint8Array(a.exports.mem.buffer,20480,9e4),c=o.getContext("2d"),i=c.createImageData(300,75),p=new Uint8Array(a.exports.mem.buffer,0,4),l=(t,e)=>{let n;switch(e.code){case"ArrowUp":n=1;break;case"ArrowDown":n=2;break;default:return}t?p[0]|=n:p[0]&=~n};document.addEventListener("keydown",l.bind(null,1),!1),document.addEventListener("keyup",l.bind(null,0),!1);let u=null;console.log("done setting up the dino demo"),function t(){if(!u){requestAnimationFrame(t);try{a.exports.run()}catch(t){console.error("failed to update. error:",t),u=t}i.data.set(r),c.putImageData(i,0,0)}}()})(r);if("maze"===s)return await(async n=>{console.log("setting up the AOT compiled maze demo");const s=document.querySelector("#"+e);s.innerHTML="";const o=document.createElement("span");o.textContent="0.0 / 0.0",o.classList.add("timer"),s.appendChild(o);const _=document.createElement("canvas");_.width=320,_.height=240,s.appendChild(_);{const t=document.createElement("style");t.innerHTML="body {\n      position: absolute;\n      display: flex;\n      flex-direction: column;\n      background-color: #555;\n      margin: 0;\n      width: 100%;\n      height: 100%;\n    }\n    canvas {\n      object-fit: contain;\n      width: 100%;\n      height: 100%;\n    }\n    .timer {\n      position: absolute;\n      top: 0;\n      right: 0;\n      font-size: xx-large;\n      background-color: #0000009c;\n      color: white;\n      text-shadow: 1px 1px 2px black;\n      width: fit-content;\n      padding: 8px;\n      margin: 8px;\n      font-variant-numeric: tabular-nums;\n    }",s.appendChild(t)}let a=!1,r=0,c=1/0;const i=()=>+new Date;let p={t:t=>{if(t)r=i();else{let t=i()-r;t<c&&(c=t),r=t}a=t}};setInterval((()=>{const t=t=>t==1/0?"":(t/1e3).toFixed(2);let e=document.querySelector(".timer"),n=a?i()-r:r;e.textContent=`${t(n)} / ${t(c)}`}),100);const l={Math,env:p},u=(0,t._K)(n,l);let d=new Uint8Array(u.exports.mem.buffer,12288,307200),m=_.getContext("2d"),h=m.createImageData(320,240),E=new Uint8Array(u.exports.mem.buffer,0,4),f=(t,e)=>{switch(e.code){case"ArrowLeft":E[0]=t;break;case"ArrowRight":E[1]=t;break;case"ArrowUp":E[2]=t;break;case"ArrowDown":E[3]=t}};document.addEventListener("keydown",f.bind(null,1),!1),document.addEventListener("keyup",f.bind(null,0),!1),function t(){requestAnimationFrame(t),u.exports.run(),h.data.set(d),m.putImageData(h,0,0)}()})(r);if("match3"===s)return await(async n=>{console.log("setting up the AOT compiled match 3 demo");const s=document.querySelector("#"+e);s.innerHTML="";const o=document.createElement("canvas");o.width=150,o.height=150,s.appendChild(o);{const t=document.createElement("style");t.innerHTML="body {\n        position: absolute;\n        display: flex;\n        flex-direction: column;\n        background-color: #fff;\n        margin: 0;\n        width: 100%;\n        height: 100%;\n      }\n      canvas {\n        object-fit: contain;\n        width: 100%;\n        height: 100%;\n        image-rendering: pixelated;\n        image-rendering: crisp-edges;\n      }",s.appendChild(t)}const _={Math:{random:Math.random}},a=(0,t._K)(n,_);if(console.log("match 3 instance",a),!(a.exports.mem instanceof Uint8Array))throw new Error('expected an export called "mem" of type Uint8Array');const r=150,c=150,i=o.getContext("2d"),p=i.createImageData(r,c);function l(t,e,n){return Math.min(Math.max(e,t),n)}const u=a.exports,d=new Uint8Array(u.mem.buffer,0,3),m=new Uint8Array(u.mem.buffer,4352,9e4);function h(t){let[e,n]=function(t){const e=t.target,n=e.clientWidth,s=e.clientHeight;let o,_,a;n<s?(o=n,_=0,a=(s-n)/2):(o=s,_=(n-s)/2,a=0);let i=t.clientX-e.offsetLeft,p=t.clientY-e.offsetTop;return[l(0,r*(i-_)/o,149),l(0,c*(p-a)/o,149)]}(t);d[0]=e,d[1]=n,d[2]=t.buttons}o.addEventListener("mousemove",h),o.addEventListener("mousedown",h),o.addEventListener("mouseup",h);let E=!1;!function t(){requestAnimationFrame(t),E||(E=!0,u.run(),p.data.set(m),i.putImageData(p,0,0),E=!1)}()})(r);if("mod"===s)return await(async t=>{console.log("setting up the AOT compiled mod demo");const n=document.querySelector("#"+e);n.innerHTML="",n.innerHTML='<div class="body-wrapper">\n  <div class="controls-wrapper bborder">\n    <div>All files hosted by <a href="https://modarchive.org">modarchive.org</a>, chosen from recent featured tracks and requests</div>\n    <div class="config">\n      <div class="controls">\n        <select id="select">\n        </select>\n        <button id="play">play</button>\n        <label class="volume-label"><span id="volume-text">volume</span><input type="range" id="volume" min="0" max="100" value="30"></label>\n        <label><span id="mono-text">mono</span><input type="checkbox" id="mono"></label>\n      </div>\n      <table>\n        <tr>\n          <th>song</th>\n          <td id="song"></td>\n        </tr>\n        <tr>\n          <th>pattern</th>\n          <td id="pattern">0</td>\n        </tr>\n      </table>\n    </div>\n  </div>\n  <div class="info-wrapper bborder">\n    <div class="info">\n      <table></table>\n    </div>\n  </div>\n  <div class="track-wrapper">\n    <table class="track">\n    </table>\n  </div>\n</div>';{const t=document.createElement("style");t.innerHTML="body {\n      position: absolute;\n      margin: 0;\n      width: 100%;\n      height: 100%;\n      user-select: none;\n      -webkit-user-select: none;\n      font: 8pt monospace;\n    }\n    .body-wrapper {\n      box-sizing: border-box;\n      display: flex;\n      background-color: #eee;\n      flex-direction: column;\n      margin: 0 auto;\n      max-width: 800px;\n      width: 100%;\n      height: 100%;\n      padding: 10px;\n    }\n    .bborder {\n      padding-bottom: 0.5em;\n      margin-bottom: 0.5em;\n      border-bottom: 1px solid #999;\n    }\n    .info-wrapper {\n      flex: 1;\n      overflow: auto;\n    }\n    .info table {\n      table-layout: fixed;\n      width: 100%;\n    }\n    .info table td {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    .track-wrapper {\n      flex: 3;\n      overflow: auto;\n    }\n    .track {\n      width: 100%;\n      height: 100%;\n    }\n    .track thead th {\n      top: 0;\n      position: sticky;\n      background: #eee;\n    }\n    .cell {\n      display: flex;\n      flex-direction: row;\n      white-space: nowrap;\n      overflow: hidden;\n      justify-content: center;\n    }\n    .note { width: 2rem; }\n    .ins { width: 1rem; }\n    .fx { width: 2rem; }\n    .hl { background-color: #777; color: white; }\n    .controls {\n      display: flex;\n      flex-direction: row;\n      flex-wrap: wrap;\n    }\n    .controls > * { margin: 0 2px; }\n    .volume-label { flex: 1; display: flex; flex-direction: row; }\n    #volume-text { align-self: center; }\n    #volume { flex: 1; }\n    #mono-text { vertical-align: middle; }\n    #mono { vertical-align: middle; }",n.appendChild(t)}const s=document.querySelector.bind(document),o=s("#play"),_=s("#select"),a=s("#volume"),r=s("#mono"),c=new AudioContext,i=c.createGain();i.gain.setValueAtTime(a.value/100,c.currentTime);let p,l,u=0,d=!1,m=!1,h=0,E=0,f=[],g=async function(){await c.audioWorklet.addModule(`${window.location.pathname}assets/demo/mod/worklet.js`);const e=t;l=new AudioWorkletNode(c,"player",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],processorOptions:{sampleRate:c.sampleRate,module:e}}),l.port.onmessage=t=>{switch(t.data.msg){case"init":!function(t){const e=new TextDecoder;function n(t,n){const s=new Uint8Array(p.buffer,t,n);return e.decode(s).replace(/\0*$/,"")}u=t,document.querySelector("#song").textContent=n(0,20);const s=document.querySelector(".info table");s.innerHTML="";const o=Math.ceil(15.5);for(let t=0;t<o;++t){const e=document.createElement("tr");for(let s=0;s<2;++s){const _=s*o+t;if(_<31){const t=n(20+30*_,22),s=document.createElement("td");s.innerHTML=`<b>${_}</b> ${t}`,e.appendChild(s)}}s.appendChild(e)}const _=document.querySelector(".track");_.innerHTML="";{const t=document.createElement("thead");let e=document.createElement("th");e.textContent="row",t.appendChild(e);for(let e=0;e<u;++e){const n=document.createElement("th");n.textContent=`ch${e+1}`,t.appendChild(n)}_.appendChild(t)}f=[];{const t=document.createElement("tbody");for(let e=0;e<64;++e){const n=document.createElement("tr"),s=document.createElement("th");s.textContent=`${e}`,n.appendChild(s),n.classList.add(`row${e}`);const o=[];for(let t=0;t<u;++t){const s=document.createElement("td"),_=document.createElement("div");_.classList.add("cell",`ch${t}`,`row${e}`);const a=document.createElement("div");a.classList.add("note"),a.textContent="C-2";const r=document.createElement("div");r.classList.add("ins"),r.textContent="00";const c=document.createElement("div");c.classList.add("fx"),c.textContent="C20",_.appendChild(a),_.appendChild(r),_.appendChild(c),s.appendChild(_),n.appendChild(s),o.push({div:_,note:a,ins:r,fx:c})}t.appendChild(n),f.push(o)}_.appendChild(t)}}(t.data.channels);break;case"draw":e=t.data.pattern,n=t.data.row,function(t){document.querySelector("#pattern").textContent=`${t}`,h=t;let e=1084+64*p.getUint8(952+t)*u*4;for(let t=0;t<64;++t)for(let n=0;n<u;++n){const s=(15&p.getUint8(e))<<8|p.getUint8(e+1),o=p.getUint8(e+2)>>4|16&p.getUint8(e),_=15&p.getUint8(e+2),a=p.getUint8(e+3),r=f[t][n],c=r.note,i=r.ins,l=r.fx;c.textContent=y[s],i.textContent=o?x(o):"-",l.textContent=_||a?`${O(_)}${x(a)}`:"---",e+=4}}(e),function(t){for(let e=0;e<u;++e)f[E][e].div.classList.remove("hl"),f[t][e].div.classList.add("hl");E=t,f[t][0].div.scrollIntoView({block:"center"})}(n)}var e,n}}();async function I(t){o.textContent="loading...",o.disabled=!0;try{let[e,n]=await Promise.all([g,await fetch(t)]);const s=await n.arrayBuffer();console.log("load - file:",s),p=new DataView(s),l.port.postMessage({msg:"load",file:s}),o.disabled=!1}finally{o.textContent="play"}}const b=["https://api.modarchive.org/downloads.php?moduleid=199742#mygg_josss_bonefish_-_turn_it_up.mod","https://api.modarchive.org/downloads.php?moduleid=199739#kefka_-_amazinggrejs.mod","https://api.modarchive.org/downloads.php?moduleid=199609#saxxonpike_-_dusk_ritual.mod","https://api.modarchive.org/downloads.php?moduleid=199607#manwe-mainspring.mod","https://api.modarchive.org/downloads.php?moduleid=199505#esau_-_3d-demo-2013.mod","https://api.modarchive.org/downloads.php?moduleid=199356#fluid_freak.mod","https://api.modarchive.org/downloads.php?moduleid=199345#generation_compoed.mod","https://api.modarchive.org/downloads.php?moduleid=199342#hot_dots.mod","https://api.modarchive.org/downloads.php?moduleid=199330#optimal_workflow.mod","https://api.modarchive.org/downloads.php?moduleid=199324#freerunner.mod","https://api.modarchive.org/downloads.php?moduleid=199193#tero_risti_-_social_engineering.mod","https://api.modarchive.org/downloads.php?moduleid=199122#at_the_sunrise.mod","https://api.modarchive.org/downloads.php?moduleid=198232#adkd_-_message_of_surabhi.mod","https://api.modarchive.org/downloads.php?moduleid=198223#richard_horvath-a_new_beginning.mod","https://api.modarchive.org/downloads.php?moduleid=198041#h0ffman_-_technova.mod","https://api.modarchive.org/downloads.php?moduleid=198040#mrs_beanbag_-_its_a_holiday.mod","https://api.modarchive.org/downloads.php?moduleid=197982#conqueror_of_virgins.mod","https://api.modarchive.org/downloads.php?moduleid=197870#bombastic-968.mod","https://api.modarchive.org/downloads.php?moduleid=197758#gmz.mod","https://api.modarchive.org/downloads.php?moduleid=197709#josss_-_khromical_science.mod","https://api.modarchive.org/downloads.php?moduleid=197707#josss_-_greased_machine.mod","https://api.modarchive.org/downloads.php?moduleid=197706#josss_-_sunny_soul.mod","https://api.modarchive.org/downloads.php?moduleid=197703#josss_-_churrasco.mod","https://api.modarchive.org/downloads.php?moduleid=197403#etro.mod","https://api.modarchive.org/downloads.php?moduleid=197293#uprough-15_years_of_fame.mod","https://api.modarchive.org/downloads.php?moduleid=197218#alpha_flight_-_hard.mod","https://api.modarchive.org/downloads.php?moduleid=197203#szudi_-_prestige.mod","https://api.modarchive.org/downloads.php?moduleid=191474#bonefish_and_mygg_-_brofists.mod","https://api.modarchive.org/downloads.php?moduleid=42919#garbage.mod"];I(b[0]);for(let t=0;t<b.length;++t){const e=document.createElement("option");0===t&&(e.selected=!0);let n=b[t].indexOf("#");e.textContent=b[t].slice(n+1),e.value=`${t}`,_.appendChild(e)}function k(t){m=t,l.port.postMessage({msg:"play",value:m}),o.textContent=m?"pause":"play"}o.addEventListener("click",(async()=>{d||(d=!0,await c.resume(),l.connect(i),i.connect(c.destination)),k(!m)})),_.addEventListener("change",(t=>{k(!1),I(b[t.target.value])})),a.addEventListener("input",(t=>{i.gain.setValueAtTime(t.target.value/100,c.currentTime)})),r.addEventListener("change",(t=>{i.disconnect(),c.destination.channelCount=t.target.checked?1:2,i.connect(c.destination)}));const y={0:"",856:"C-1 ",808:"C#-1",762:"D-1 ",720:"D#-1",678:"E-1 ",640:"F-1 ",604:"F#-1",570:"G-1 ",538:"G#-1",508:"A-1 ",480:"A#-1",453:"B-1 ",428:"C-2 ",404:"C#-2",381:"D-2 ",360:"D#-2",339:"E-2 ",320:"F-2 ",302:"F#-2",285:"G-2 ",269:"G#-2",254:"A-2 ",240:"A#-2",226:"B-2 ",214:"C-3 ",202:"C#-3",190:"D-3 ",180:"D#-3",170:"E-3 ",160:"F-3 ",151:"F#-3",143:"G-3 ",135:"G#-3",127:"A-3 ",120:"A#-3",113:"B-3 "},O=t=>t.toString(16).toUpperCase(),x=t=>O(t).padStart(2,"0")})(r);if("badgb"===s)return await n(r);throw new Error(`unsupported demo: ${s}`)};(async()=>{window&&window.WASM2JS_DEMO_MODE&&(console.log("main start"),(()=>{console.log("setup start");{const t=document.createElement("style");t.innerHTML="\nh1 {\n    font-family: sans-serif;\n}\n.div-screenshot-wrapper {\n    display: grid;\n    background-color: black;\n    padding: 0.2em;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: 0.1em;\n}\n.div-screenshot-wrapper > img {\n    object-fit: cover;\n    width: 100%;\n    max-height: 100%;\n    aspect-ratio: 1;\n    cursor: pointer;\n}\n.div-screenshot-wrapper > img:hover {\n    transform: scale(1.2);\n    transition: all 0.2s;\n}\n",document.head.appendChild(t)}const t=document.querySelector("#root"),e=document.createElement("h1");e.textContent="WASM to JS Demos",t.appendChild(e);const n=(e,n)=>{const s=document.createElement("a");s.textContent=e,s.setAttribute("href",e),(n||t).appendChild(s);const o=document.createElement("br");(n||t).appendChild(o)},o=document.createElement("p");o.textContent="Each of the below demos were compiled (decompiled?) from a WebAssembly binary to Javascript code using the library:",n("https://github.com/HarikrishnanBalagopal/wasm2js",o),n("https://www.npmjs.com/package/@haribala/wasm2js",o),t.appendChild(o);const _=document.createElement("p");_.textContent="The demos were taken and adapted to work with Wasm2JS from this repo:",n("https://github.com/binji/raw-wasm",_),t.appendChild(_);{const e=document.createElement("div");e.classList.add("div-screenshot-wrapper"),["quine.png","fire.jpg","jit.png","metaball.jpg","inflate.jpg","chip8.jpg","ray.jpg","snake.jpg","dino.png","maze.jpg","match3.jpg","mod.jpg","badgb.png"].forEach((t=>{const n=document.createElement("img");n.setAttribute("src",`${window.location.pathname}assets/images/screenshots/${t}`),n.setAttribute("alt",t);const o=t.slice(0,t.lastIndexOf("."));console.log("target",o),n.addEventListener("click",(()=>s(o))),e.appendChild(n)})),t.appendChild(e)}console.log("setup end")})(),console.log("main end"))})().catch(console.error)})()})();